<!--Custom report.-->
<odoo>
    <data>
        <template id="payment_request_bill">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <!--                    <t t-set="lang"-->
                    <!--                       t-value="o.invoice_user_id.sudo().lang if o.type in ('in_invoice', 'in_refund') else o.partner_id.lang"/>-->
                    <t t-set="lang"
                       t-value="o.partner_id.lang"/>
                    <t t-call="Maintain_Payment_Request_Bill.payment_request_template" t-lang="lang"/>
                </t>
            </t>
        </template>
        <template id="payment_request_template">
            <div class="page" style="page-break-before: always;">
                <t t-set="a" t-value="o.with_context(lang=lang)"/>
                <t t-set="o" t-value="o.with_context(lang=o.partner_id.lang).partner_id"/>

                <!-- LOGO AND TITLE -->
                <div style="border-bottom: 3px solid #000;" class="payment_request_title">
                    <div style="float: left; width: -webkit-fill-available; text-align: center">
                        <h4 class="mt0"
                            style="font-size: 32px; color: #000; line-height: 50px; margin: 0; padding: 0">
                            請求書</h4>
                    </div>
                    <div style="clear: both;"/>
                </div>
                <!--                <div name="date_printed" style="text-align: center; padding-bottom: 30px;">-->
                <!--                    <span>発行日: <t t-if="o.x_current_date">-->
                <!--                        <span t-field="o.x_current_date"-->
                <!--                              t-options="{&quot;format&quot;: &quot;yyyy年MM月dd日&quot;}"/>-->
                <!--                    </t>-->
                <!--                        <span t-else="">　　　年　　月　　日</span></span>-->
                <!--                </div>-->

                <!-- HEADER OF CONTENT -->
                <div style="padding-bottom: 3em;">
                    <div style="display: inline-block; max-width: 50%;">
                        <div style="border-bottom: 2px solid #000;">
                            <strong><span t-field="o.name"/> <span t-field="o.title"/></strong>
                        </div>
                        <div>
                            <span t-field="o.zip"/>
                        </div>
                        <div>
                            <span t-field="o.street"/>
                            <span t-field="o.city"/>
                            <!--                            <span t-field="o.x_studio_address_3"/>-->
                        </div>
                        <div>
                            TEL: <span t-field="o.phone"/>
                            / FAX: <span t-field="o.customer_fax"/>
                        </div>
                        <div>
                            <span t-field="o.customer_name_short"/>
                        </div>
                    </div>
                    <div style="display: inline-block; width: 45%; float: right">
                        <t t-set="company_info"
                           t-value="o.invoice_ids.company_id"/>
                        <div style="border-bottom: 2px solid #000;">
                            <!--                            <t t-foreach="docs" t-as="o">-->

                            <span t-field="company_info.name"/>
                            <!--                                <t t-esc="o.bill_invoice_ids"/>-->
                            <!--                                <span t-field="o.bill_invoice_ids"/>-->
                            <!--                    <t t-set="lang"-->
                            <!--                       t-value="o.lang"/>-->
                            <!--                            </t>-->
                            <!--                            <span t-field="o.account_move_id"/><strong/>-->
                        </div>
                        <div>
                            TEL: <span t-field="company_info.phone"/>
                            / FAX: <span t-field="company_info.company_fax"/>
                        </div>
                        <div>
                            Email: <span t-field="company_info.email"/>
                        </div>
                        <div>
                            Address: <span t-field="company_info.street"/>
                        </div>
                        <div>
                            <span t-field="company_info.website"/>
                        </div>
                    </div>
                    <div style="clear: both"/>
                </div>

                <!-- PRICE -->

                <div class="price" style="margin-right: 10px; margin-bottom: 10px; margin-top: 10px">
                    <div style="text-align: center; padding-bottom: 2em;">
                        <table style="margin-left: auto; margin-right: auto; padding-bottom: 5px">
                            <thead>
                                <tr style="font-size: 14px; padding: 5px; font-weight: 600;">
                                    <td style="width: 100px; border: 1px solid #000;background-color: #e0e0e0;">
                                        前回請求金額</td>
                                    <td style="width: 100px; border: 1px solid #000;background-color: #e0e0e0;">入金額</td>
                                    <td style="width: 100px; border: 1px solid #000;background-color: #e0e0e0;">
                                        繰越金額</td>
                                    <td style="width: 100px; border: 1px solid #000;background-color: #e0e0e0;">
                                        御買上金額</td>
                                    <td style="width: 100px; border: 1px solid #000;background-color: #e0e0e0;">
                                        今回請求金額</td>
                                    <td style="width: 100px;"></td>
                                    <td style="width: 100px; border-top: 1px solid #000;border-right: 1px solid #000;border-left: 1px solid #000;"></td>
                                    <td style="width: 100px; border-top: 1px solid #000;border-right: 1px solid #000;border-left: 1px solid #000;"></td>
                                </tr>
                            </thead>
                            <tbody>

                                <tr>
                                    <!--                                    <td><t t-esc="a.last_billed_amount"/></td>-->
                                    <td style="border: 1px solid #000;">
                                        <span>
                                            <t t-esc="a.last_billed_amount"/>
                                        </span></td>
                                    <td style="border: 1px solid #000;">
                                        <span>
                                            <t t-esc="a.deposit_amount"/>
                                        </span></td>
                                    <td style="border: 1px solid #000;">
                                        <span>
                                            <t t-esc="a.balance_amount"/>
                                        </span></td>
                                    <td style="border: 1px solid #000;">
                                        <span>
                                            <t t-esc="a.amount_untaxed"/>
                                        </span></td>
                                    <td style="border: 1px solid #000;">
                                        <span>
                                            <t t-esc="a.amount_total"/>
                                        </span></td>
                                    <td style="width: 100px;"></td>
                                    <td style="width: 100px; border-bottom: 1px solid #000;border-right: 1px solid #000;border-left: 1px solid #000;"></td>
                                    <td style="width: 100px; border-bottom: 1px solid #000;border-right: 1px solid #000;border-left: 1px solid #000; min-height: 100px"></td>
                                </tr>
                            </tbody>

                        </table>
                    </div>
                    <div style="clear: both"/>
                </div>
                <div>弊社の製品とサービスをご利用いただき、誠にありがとうございます。<br/> あなたの健康と幸運を願っています。<br/>
                    購入した製品とサービスの詳細は次のとおりです。</div>
                <span t-field="docs.search_address_type">
                </span>
                <t t-call="Maintain_Payment_Request_Bill.payment_request_detail_table" t-lang="lang"/>
            </div>
        </template>
        <template id="payment_request_detail_table">
            <!--            <t t-set="a" t-value="o.with_context(lang=lang)"/>-->
            <div id="detail_table" style="border: 1.5px solid #000;">
                <div style="min-height: auto">
                    <table border="0" cellspacing="0" style="width: 100%; font-size: 12px;">
                        <thead>
                            <tr>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_id"><span>日付</span></td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_id"><span>伝票Ｎｏ</span></td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_id"><span>JANコード</span></td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_id"><span>商品コード</span></td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_id"><span>品番/型番</span></td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_description"><span>メーカー名</span></td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_priceunit"><span>商品名</span></td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_taxes"><span>数量</span></td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_subtotal">単価</td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_subtotal">金額</td>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-set="bill_invoices" t-value="a.bill_invoice_ids"/>
                            <t t-foreach="bill_invoices" t-as="inv">
                                <t t-set="detail" t-value="inv.bill_invoice_details_ids"/>
                                <t t-foreach="detail" t-as="de">
                                    <tr>
                                        <td style="border: 1px solid #000; text-align: left">
                                            <span t-field="inv.bill_date">
                                            </span>
                                        </td>
                                        <td style="border: 1px solid #000; text-align: left">
                                            <span t-field="inv.bill_no"/>
                                        </td>
                                        <t t-set="li" t-value="de.account_move_line_id"/>
                                        <td style="border: 1px solid #000; text-align: left">
                                            <span t-field="li.x_product_barcode"/>
                                        </td>
                                        <td style="border: 1px solid #000; border-top: 0; border-right: 0; text-align: left;">
                                            <span t-field="li.invoice_no"/>
                                        </td>
                                        <td style="border: 1px solid #000; border-top: 0; border-right: 0;  text-align: left;">
                                            <span t-field="li.invoice_custom_standardnumber"/>
                                        </td>
                                        <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: left;"
                                            class="text-right">
                                            <t t-set="pro" t-value="li.product_id"/>
                                            <span t-field="pro.product_maker_name"/>
                                        </td>
                                        <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                            <span t-field="li.x_product_name"/>
                                        </td>
                                        <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                            <span t-field="li.quantity"/>
                                        </td>
                                        <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                            <span t-field="li.price_unit"/>
                                        </td>
                                        <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                            <span t-field="li.credit"/>
                                        </td>
                                    </tr>
                                    <t t-if="docs.search_cash_type == 1">
                                        <t t-set="acc" t-value="inv.account_move_id"/>
                                        <t t-set="pay" t-value="acc.payment_id"/>
                                        <t t-foreach="pay" t-as="pa">
                                            <tr>
                                                <td style="border: 1px solid #000;">
                                                    <span t-field="inv.bill_date">
                                                    </span>
                                                </td>
                                                <td style="border: 1px solid #000;">
                                                    <span t-field="inv.bill_no"/>
                                                </td>
                                                <td style="border: 1px solid #000;">
                                                    <span>Paid:</span>
                                                    <span t-field="pa.payment_amount"/>
                                                </td>
                                                <td style="border: 1px solid #000;"></td>
                                                <td style="border: 1px solid #000;"></td>
                                                <td style="border: 1px solid #000;"></td>
                                                <td style="border: 1px solid #000;"></td>
                                                <td style="border: 1px solid #000;"></td>
                                                <td style="border: 1px solid #000;"></td>
                                                <td style="border: 1px solid #000;"></td>
                                            </tr>
                                        </t>
                                    </t>
                                </t>
                            </t>
                        </tbody>
                    </table>
                </div>
            </div>
        </template>
    </data>
</odoo>