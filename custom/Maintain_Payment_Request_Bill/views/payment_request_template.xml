<!--Custom report.-->
<odoo>
    <data>
        <template id="payment_request_bill">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doca">
                    <!--                    <t t-set="lang"-->
                    <!--                       t-value="o.invoice_user_id.sudo().lang if o.type in ('in_invoice', 'in_refund') else o.partner_id.lang"/>-->
                    <t t-set="lang"
                       t-value="doca.partner_id.lang"/>
                    <t t-call="Maintain_Payment_Request_Bill.payment_request_template" t-lang="lang"/>
                </t>
            </t>
        </template>
        <template id="payment_request_template">
            <div class="page" style="page-break-before: always;">
                <t t-set="a" t-value="doca.with_context(lang=lang)"/>
                <t t-set="o" t-value="a.partner_id"/>

                <!-- LOGO AND TITLE -->
                <div style="border-bottom: 3px solid #000;" class="payment_request_title">
                    <div style="float: left; width: -webkit-fill-available; text-align: center">
                        <h4 class="mt0"
                            style="font-size: 32px; color: #000; line-height: 50px; margin: 0; padding: 0">
                            請求書</h4>
                    </div>
                    <div style="clear: both;"/>
                </div>
                <!--                <div name="date_printed" style="text-align: center; padding-bottom: 30px;">-->
                <!--                    <span>発行日: <t t-if="o.x_current_date">-->
                <!--                        <span t-field="o.x_current_date"-->
                <!--                              t-options="{&quot;format&quot;: &quot;yyyy年MM月dd日&quot;}"/>-->
                <!--                    </t>-->
                <!--                        <span t-else="">　　　年　　月　　日</span></span>-->
                <!--                </div>-->

                <!-- HEADER OF CONTENT -->
                <div style="padding-bottom: 3em;">
                    <div style="display: inline-block; max-width: 50%;">
                        <div style="display: inline-block;">
                            <div style="border-bottom: 2px solid #000;">
                                <strong><span t-field="o.name"/></strong>
                            </div>
                            <div>
                                <span t-field="o.zip"/>
                            </div>

                            <div>
                                電話番号 <span t-field="o.phone"/><br/>
                                ファクス番号 <span t-field="o.customer_fax"/>
                            </div>
                            <div>
                                <span>住所 </span>
                                <span t-field="o.street"/>
                                <span t-field="o.city"/>
                            </div>
                        </div>
                    </div>
                    <div style="display: inline-block; width: 45%; float: right">
                        <div style="display: inline-block;">
                            <t t-set="company_info"
                               t-value="o.invoice_ids.company_id"/>
                            <div style="border-bottom: 2px solid #000;">
                                <span t-field="company_info.name"/>
                            </div>
                            <div>
                                電話番号 <span t-field="company_info.phone"/><br/>
                                ファクス番号 <span t-field="company_info.company_fax"/>
                            </div>
                            <div>
                                メール <span t-field="company_info.email"/>
                            </div>
                            <div>
                                住所 <span t-field="company_info.street"/>
                            </div>
                            <div>
                                <span t-field="company_info.website"/>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- PRICE -->

                <div class="price" style="margin-right: 10px; margin-bottom: 10px; margin-top: 10px">
                    <div style="text-align: center; padding-bottom: 2em;">
                        <table style="margin-left: auto; margin-right: auto; padding-bottom: 5px; float: left; display: inline-block;">
                            <thead>
                                <tr style="font-size: 14px; padding: 5px; font-weight: 600;">
                                    <td style="width: 100px; border: 1px solid #000;background-color: #e0e0e0;">
                                        前回請求金額</td>
                                    <td style="width: 100px; border: 1px solid #000;background-color: #e0e0e0;">入金額</td>
                                    <td style="width: 100px; border: 1px solid #000;background-color: #e0e0e0;">
                                        繰越金額</td>
                                    <td style="width: 100px; border: 1px solid #000;background-color: #e0e0e0;">
                                        御買上金額</td>
                                    <td style="width: 100px; border: 1px solid #000;background-color: #e0e0e0;">
                                        今回請求金額</td>
                                    <td style="width: 100px;"></td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="border: 1px solid #000;">
                                        <span>
                                            <t t-esc="a.last_billed_amount"/>
                                        </span></td>
                                    <td style="border: 1px solid #000;">
                                        <span>
                                            <t t-esc="a.deposit_amount"/>
                                        </span></td>
                                    <td style="border: 1px solid #000;">
                                        <span>
                                            <t t-esc="a.balance_amount"/>
                                        </span></td>
                                    <td style="border: 1px solid #000;">
                                        <span>
                                            <t t-esc="a.amount_untaxed"/>
                                        </span></td>
                                    <td style="border: 1px solid #000;">
                                        <span>
                                            <t t-esc="a.amount_total"/>
                                        </span></td>
                                    <td style="width: 100px;"></td>
                                    <!--                                    <td style="width: 100px; border-bottom: 1px solid #000;border-right: 1px solid #000;border-left: 1px solid #000;"></td>-->
                                    <!--                                    <td style="width: 100px; border-bottom: 1px solid #000;border-right: 1px solid #000;border-left: 1px solid #000; min-height: 100px"></td>-->
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div style="width: 25%; display: flex; float: right; margin-top: -30px;">
                        <span style="border: 1px solid #000000; width: 90px; height: 90px; display: inline-block;"></span>
                        <span style="border: 1px solid #000000; width: 90px; height: 90px; display: inline-block;"></span>
                    </div>
                    <div style="clear: both"/>
                </div>
                <div style="margin-bottom:30px">弊社の製品とサービスをご利用いただき、誠にありがとうございます。<br/> あなたの健康と幸運を願っています。<br/>
                    購入した製品とサービスの詳細は次のとおりです。</div>
                <div>
                    <t t-set="line_1" t-value="0"/>
                    <t t-set="line_id" t-value="1"/>
                    <t t-foreach="doca" t-as="doc">
                        <t t-if="line_id > line_1">
                            <t t-set="line_id" t-value="doc.id"/>
                            <t t-set="line_1" t-value="line_id"/>
                            <t t-if="doc.search_claim_type == 1">
                                <t t-if="doc.search_print_child == 1">
                                    <t t-call="Maintain_Payment_Request_Bill.payment_request_child_detail_table"
                                       t-lang="lang"/>
                                </t>
                                <t t-else="">
                                    <t t-call="Maintain_Payment_Request_Bill.payment_request_detail_table"
                                       t-lang="lang"/>
                                </t>
                            </t>
                            <t t-else="">
                                <t t-if="a.amount_total != 0">
                                    <t t-if="doc.search_print_child == 1">
                                        <t t-call="Maintain_Payment_Request_Bill.payment_request_child_detail_table_1"
                                           t-lang="lang"/>
                                    </t>
                                    <t t-else="">
                                        <t t-call="Maintain_Payment_Request_Bill.payment_request_detail_table_1"
                                           t-lang="lang"/>
                                    </t>
                                </t>
                            </t>
                        </t>
                    </t>
                </div>
            </div>
        </template>
        <template id="payment_request_detail_table">
            <!--            <t t-set="a" t-value="o.with_context(lang=lang)"/>-->
            <div id="detail_table" style="border: 1.5px solid #000;">
                <div style="min-height: auto">
                    <table border="0" cellspacing="0" style="width: 100%; font-size: 12px;">
                        <thead>
                            <tr>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_id"><span>日付</span></td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_id"><span>伝票Ｎｏ</span></td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_id"><span>JANコード</span></td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_id"><span>商品コード</span></td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_id"><span>品番/型番</span></td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_description"><span>メーカー名</span></td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_priceunit"><span>商品名</span></td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_taxes"><span>数量</span></td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_subtotal">単価</td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_subtotal">金額</td>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-if="doc.search_cash_type == 1">

                                <t t-set="bill_invoices" t-value="a.bill_invoice_ids"/>
                                <t t-foreach="bill_invoices" t-as="inv">
                                    <t t-if="inv.customer_trans_classification_code != 'cash'">
                                        <t t-set="detail" t-value="inv.bill_invoice_details_ids"/>
                                        <t t-foreach="detail" t-as="de">
                                            <tr>
                                                <td style="border: 1px solid #000; text-align: left">
                                                    <span t-field="inv.bill_date">
                                                    </span>
                                                </td>
                                                <td style="border: 1px solid #000; text-align: left">
                                                    <span t-field="inv.account_move_id.x_studio_document_no"/>
                                                </td>
                                                <t t-set="li" t-value="de.account_move_line_id"/>
                                                <td style="border: 1px solid #000; text-align: left">
                                                    <span t-field="li.product_barcode"/>
                                                </td>
                                                <td style="border: 1px solid #000; border-top: 0; border-right: 0; text-align: left;">
                                                    <span t-field="li.product_id"/>
                                                </td>
                                                <td style="border: 1px solid #000; border-top: 0; border-right: 0;  text-align: left;">
                                                    <span t-field="li.invoice_custom_standardnumber"/>
                                                </td>
                                                <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: left;"
                                                    class="text-right">
                                                    <t t-set="pro" t-value="li.product_id"/>
                                                    <span t-field="pro.product_maker_name"/>
                                                </td>
                                                <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                    <span t-field="li.product_name"/>
                                                </td>
                                                <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                    <span t-field="li.quantity"/>
                                                </td>
                                                <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                    <span t-field="li.price_unit"/>
                                                </td>
                                                <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                    <span t-field="li.invoice_custom_lineamount"/>
                                                </td>
                                            </tr>
                                        </t>
                                    </t>
                                </t>
                            </t>
                            <t t-else="">
                                <t t-set="bill_invoices" t-value="a.bill_invoice_ids"/>
                                <t t-foreach="bill_invoices" t-as="inv">
                                    <t t-set="detail" t-value="inv.bill_invoice_details_ids"/>
                                    <t t-foreach="detail" t-as="de">
                                        <tr>
                                            <td style="border: 1px solid #000; text-align: left">
                                                <span t-field="inv.bill_date">
                                                </span>
                                            </td>
                                            <td style="border: 1px solid #000; text-align: left">
                                                <span t-field="inv.account_move_id.x_studio_document_no"/>
                                            </td>
                                            <t t-set="li" t-value="de.account_move_line_id"/>
                                            <td style="border: 1px solid #000; text-align: left">
                                                <span t-field="li.product_barcode"/>
                                            </td>
                                            <td style="border: 1px solid #000; border-top: 0; border-right: 0; text-align: left;">
                                                <span t-field="li.product_id"/>
                                            </td>
                                            <td style="border: 1px solid #000; border-top: 0; border-right: 0;  text-align: left;">
                                                <span t-field="li.invoice_custom_standardnumber"/>
                                            </td>
                                            <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: left;"
                                                class="text-right">
                                                <t t-set="pro" t-value="li.product_id"/>
                                                <span t-field="pro.product_maker_name"/>
                                            </td>
                                            <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                <span t-field="li.product_name"/>
                                            </td>
                                            <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                <span t-field="li.quantity"/>
                                            </td>
                                            <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                <span t-field="li.price_unit"/>
                                            </td>
                                            <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                <span t-field="li.invoice_custom_lineamount"/>
                                            </td>
                                        </tr>
                                    </t>
                                </t>
                            </t>
                        </tbody>
                    </table>
                </div>
            </div>
        </template>
        <template id="payment_request_child_detail_table">
            <t t-set="cus" t-value="0"/>
            <t t-if="doc.search_cash_type == 0">

                <t t-set="bill_invoices" t-value="a.bill_invoice_ids"/>
                <t t-foreach="bill_invoices" t-as="bill_inv">
                    <t t-set="cus0" t-value="bill_inv.customer_code"/>
                    <t t-if="cus0 != cus">
                        <t t-set="cus" t-value="bill_inv.customer_code"/>
                        <t t-set="acc_move" t-value="bill_inv.account_move_id"/>
                        <t t-set="res_part" t-value="acc_move.partner_id"/>
                        <t t-set="re_acc" t-value="res_part.invoice_ids"/>
                        <!--                    <span t-field="bill_inv.customer_code"></span>-->


                        <div style="page-break-after:always">
                            <span>取引先コード: </span>
                            <span t-field="bill_inv.customer_code">
                            </span><br/>
                            <span>取引先名: </span>
                            <span t-field="bill_inv.customer_name"/>
                            <div id="detail_table" style="border: 1.5px solid #000;">
                                <div style="min-height: auto">
                                    <table border="0" cellspacing="0" style="width: 100%; font-size: 12px;">
                                        <thead>
                                            <tr>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_id"><span>日付</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_id"><span>伝票Ｎｏ</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_id"><span>JANコード</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_id"><span>商品コード</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_id"><span>品番/型番</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_description"><span>メーカー名</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_priceunit"><span>商品名</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_taxes"><span>数量</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_subtotal">単価</td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_subtotal">金額</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <t t-foreach="re_acc" t-as="ac">
                                                <t t-if="ac.bill_invoice_ids.id">
                                                    <t t-foreach="ac.bill_invoice_ids" t-as="inv">
                                                        <t t-if="inv.customer_trans_classification_code != 'cash'">
                                                            <t t-set="detail" t-value="inv.bill_invoice_details_ids"/>

                                                            <t t-foreach="detail" t-as="de">
                                                                <tr>
                                                                    <td style="border: 1px solid #000; text-align: left">
                                                                        <span t-field="inv.bill_date">
                                                                        </span>
                                                                        <!--                                                                <span t-esc="cus"/>-->
                                                                    </td>
                                                                    <td style="border: 1px solid #000; text-align: left">
                                                                        <span t-field="inv.account_move_id.x_studio_document_no"/>
                                                                    </td>
                                                                    <t t-set="li" t-value="de.account_move_line_id"/>
                                                                    <td style="border: 1px solid #000; text-align: left">
                                                                        <span t-field="li.product_barcode"/>
                                                                    </td>
                                                                    <td style="border: 1px solid #000; border-top: 0; border-right: 0; text-align: left;">
                                                                        <span t-field="li.product_id"/>
                                                                    </td>
                                                                    <td style="border: 1px solid #000; border-top: 0; border-right: 0;  text-align: left;">
                                                                        <span t-field="li.invoice_custom_standardnumber"/>
                                                                    </td>
                                                                    <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: left;"
                                                                        class="text-right">
                                                                        <t t-set="pro" t-value="li.product_id"/>
                                                                        <span t-field="pro.product_maker_name"/>
                                                                    </td>
                                                                    <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                                        <span t-field="li.product_name"/>
                                                                    </td>
                                                                    <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                                        <span t-field="li.quantity"/>
                                                                    </td>
                                                                    <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                                        <span t-field="li.price_unit"/>
                                                                    </td>
                                                                    <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                                        <span t-field="li.invoice_custom_lineamount"/>
                                                                    </td>
                                                                </tr>
                                                            </t>
                                                        </t>
                                                    </t>
                                                </t>
                                            </t>

                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </t>
                </t>
            </t>
            <t t-else="">
                <t t-foreach="a.bill_invoice_ids.sorted(key=lambda r: r.customer_code)" t-as="bill_inv">
                    <t t-set="cus0" t-value="bill_inv.customer_code"/>
                    <t t-if="cus0 != cus">
                        <t t-set="cus" t-value="bill_inv.customer_code"/>
                        <t t-set="acc_move" t-value="bill_inv.account_move_id"/>
                        <t t-set="res_part" t-value="acc_move.partner_id"/>
                        <t t-set="re_acc" t-value="res_part.invoice_ids"/>
                        <!--                    <span t-field="bill_inv.customer_code"></span>-->


                        <div style="page-break-after:always">
                            <span>取引先コード: </span>
                            <span t-field="bill_inv.customer_code">
                            </span><br/>
                            <span>取引先名: </span>
                            <span t-field="bill_inv.customer_name"/>
                            <div id="detail_table" style="border: 1.5px solid #000;">
                                <div style="min-height: auto">
                                    <table border="0" cellspacing="0" style="width: 100%; font-size: 12px;">
                                        <thead>
                                            <tr>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_id"><span>日付</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_id"><span>伝票Ｎｏ</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_id"><span>JANコード</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_id"><span>商品コード</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_id"><span>品番/型番</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_description"><span>メーカー名</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_priceunit"><span>商品名</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_taxes"><span>数量</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_subtotal">単価</td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_subtotal">金額</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <t t-foreach="re_acc" t-as="ac">
                                                <t t-if="ac.bill_invoice_ids.id">
                                                    <t t-foreach="ac.bill_invoice_ids" t-as="inv">
                                                        <t t-set="detail"
                                                           t-value="inv.bill_invoice_details_ids"/>
                                                        <!--                                                        <t t-set="cus" t-value="ac.bill_invoice_ids.customer_code"/>-->
                                                        <t t-foreach="detail" t-as="de">
                                                            <tr>
                                                                <td style="border: 1px solid #000; text-align: left">
                                                                    <span t-field="inv.bill_date">
                                                                    </span>
                                                                    <!--                                                                <span t-esc="cus"/>-->
                                                                </td>
                                                                <td style="border: 1px solid #000; text-align: left">
                                                                    <span t-field="inv.account_move_id.x_studio_document_no"/>
                                                                </td>
                                                                <t t-set="li"
                                                                   t-value="de.account_move_line_id"/>
                                                                <td style="border: 1px solid #000; text-align: left">
                                                                    <span t-field="li.product_barcode"/>
                                                                </td>
                                                                <td style="border: 1px solid #000; border-top: 0; border-right: 0; text-align: left;">
                                                                    <span t-field="li.product_id"/>
                                                                </td>
                                                                <td style="border: 1px solid #000; border-top: 0; border-right: 0;  text-align: left;">
                                                                    <span t-field="li.invoice_custom_standardnumber"/>
                                                                </td>
                                                                <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: left;"
                                                                    class="text-right">
                                                                    <t t-set="pro" t-value="li.product_id"/>
                                                                    <span t-field="pro.product_maker_name"/>
                                                                </td>
                                                                <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                                    <span t-field="li.product_name"/>
                                                                </td>
                                                                <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                                    <span t-field="li.quantity"/>
                                                                </td>
                                                                <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                                    <span t-field="li.price_unit"/>
                                                                </td>
                                                                <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                                    <span t-field="li.invoice_custom_lineamount"/>
                                                                </td>
                                                            </tr>
                                                        </t>
                                                    </t>
                                                </t>
                                            </t>

                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </t>
                </t>
            </t>
        </template>
        <template id="payment_request_detail_table_1">
            <!--            <t t-set="a" t-value="o.with_context(lang=lang)"/>-->
            <div id="detail_table" style="border: 1.5px solid #000;">
                <div style="min-height: auto">
                    <table border="0" cellspacing="0" style="width: 100%; font-size: 12px;">
                        <thead>
                            <tr>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_id"><span>日付</span></td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_id"><span>伝票Ｎｏ</span></td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_id"><span>JANコード</span></td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_id"><span>商品コード</span></td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_id"><span>品番/型番</span></td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_description"><span>メーカー名</span></td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_priceunit"><span>商品名</span></td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_taxes"><span>数量</span></td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_subtotal">単価</td>
                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                    name="th_subtotal">金額</td>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-if="doc.search_cash_type == 1">

                                <t t-set="bill_invoices" t-value="a.bill_invoice_ids"/>
                                <t t-foreach="bill_invoices" t-as="inv">
                                    <t t-if="inv.amount_total != 0">
                                        <t t-if="inv.customer_trans_classification_code != 'cash'">
                                            <t t-set="detail" t-value="inv.bill_invoice_details_ids"/>
                                            <t t-foreach="detail" t-as="de">
                                                <tr>
                                                    <td style="border: 1px solid #000; text-align: left">
                                                        <span t-field="inv.bill_date">
                                                        </span>
                                                    </td>
                                                    <td style="border: 1px solid #000; text-align: left">
                                                        <span t-field="inv.account_move_id.x_studio_document_no"/>
                                                    </td>
                                                    <t t-set="li" t-value="de.account_move_line_id"/>
                                                    <td style="border: 1px solid #000; text-align: left">
                                                        <span t-field="li.product_barcode"/>
                                                    </td>
                                                    <td style="border: 1px solid #000; border-top: 0; border-right: 0; text-align: left;">
                                                        <span t-field="li.product_id"/>
                                                    </td>
                                                    <td style="border: 1px solid #000; border-top: 0; border-right: 0;  text-align: left;">
                                                        <span t-field="li.invoice_custom_standardnumber"/>
                                                    </td>
                                                    <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: left;"
                                                        class="text-right">
                                                        <t t-set="pro" t-value="li.product_id"/>
                                                        <span t-field="pro.product_maker_name"/>
                                                    </td>
                                                    <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                        <span t-field="li.product_name"/>
                                                    </td>
                                                    <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                        <span t-field="li.quantity"/>
                                                    </td>
                                                    <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                        <span t-field="li.price_unit"/>
                                                    </td>
                                                    <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                        <span t-field="li.invoice_custom_lineamount"/>
                                                    </td>
                                                </tr>
                                            </t>
                                        </t>
                                    </t>
                                </t>
                            </t>
                            <t t-else="">
                                <t t-set="bill_invoices" t-value="a.bill_invoice_ids"/>
                                <t t-foreach="bill_invoices" t-as="inv">
                                    <t t-if="inv.amount_total!= 0">
                                        <t t-set="detail" t-value="inv.bill_invoice_details_ids"/>
                                        <t t-foreach="detail" t-as="de">
                                            <tr>
                                                <td style="border: 1px solid #000; text-align: left">
                                                    <span t-field="inv.bill_date">
                                                    </span>
                                                </td>
                                                <td style="border: 1px solid #000; text-align: left">
                                                    <span t-field="inv.account_move_id.x_studio_document_no"/>
                                                </td>
                                                <t t-set="li" t-value="de.account_move_line_id"/>
                                                <td style="border: 1px solid #000; text-align: left">
                                                    <span t-field="li.product_barcode"/>
                                                </td>
                                                <td style="border: 1px solid #000; border-top: 0; border-right: 0; text-align: left;">
                                                    <span t-field="li.product_id"/>
                                                </td>
                                                <td style="border: 1px solid #000; border-top: 0; border-right: 0;  text-align: left;">
                                                    <span t-field="li.invoice_custom_standardnumber"/>
                                                </td>
                                                <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: left;"
                                                    class="text-right">
                                                    <t t-set="pro" t-value="li.product_id"/>
                                                    <span t-field="pro.product_maker_name"/>
                                                </td>
                                                <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                    <span t-field="li.product_name"/>
                                                </td>
                                                <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                    <span t-field="li.quantity"/>
                                                </td>
                                                <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                    <span t-field="li.price_unit"/>
                                                </td>
                                                <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                    <span t-field="li.invoice_custom_lineamount"/>
                                                </td>
                                            </tr>
                                        </t>
                                    </t>
                                </t>
                            </t>
                        </tbody>
                    </table>
                </div>
            </div>
        </template>
        <template id="payment_request_child_detail_table_1">
            <t t-set="cus" t-value="0"/>
            <t t-if="doc.search_cash_type == 0">

                <t t-set="bill_invoices" t-value="a.bill_invoice_ids"/>

                <t t-foreach="bill_invoices" t-as="bill_inv">
                    <t t-set="cus0" t-value="bill_inv.customer_code"/>
                    <t t-if="cus0 != cus">
                        <t t-set="cus" t-value="bill_inv.customer_code"/>
                        <t t-set="acc_move" t-value="bill_inv.account_move_id"/>
                        <t t-set="res_part" t-value="acc_move.partner_id"/>
                        <t t-set="re_acc" t-value="res_part.invoice_ids"/>
                        <!--                    <span t-field="bill_inv.customer_code"></span>-->


                        <div style="page-break-after:always">
                            <span>取引先コード: </span>
                            <span t-field="bill_inv.customer_code">
                            </span><br/>
                            <span>取引先名: </span>
                            <span t-field="bill_inv.customer_name"/>
                            <div id="detail_table" style="border: 1.5px solid #000;">
                                <div style="min-height: auto">
                                    <table border="0" cellspacing="0" style="width: 100%; font-size: 12px;">
                                        <thead>
                                            <tr>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_id"><span>日付</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_id"><span>伝票Ｎｏ</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_id"><span>JANコード</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_id"><span>商品コード</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_id"><span>品番/型番</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_description"><span>メーカー名</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_priceunit"><span>商品名</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_taxes"><span>数量</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_subtotal">単価</td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_subtotal">金額</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <t t-foreach="re_acc" t-as="ac">
                                                <t t-if="ac.bill_invoice_ids.id">
                                                    <t t-foreach="ac.bill_invoice_ids" t-as="inv">
                                                        <t t-if="inv.amount_total != 0">
                                                            <t t-if="inv.customer_trans_classification_code != 'cash'">
                                                                <t t-set="detail"
                                                                   t-value="inv.bill_invoice_details_ids"/>
                                                                <t t-foreach="detail" t-as="de">
                                                                    <tr>
                                                                        <td style="border: 1px solid #000; text-align: left">
                                                                            <span t-field="inv.bill_date">
                                                                            </span>
                                                                            <!--                                                                <span t-esc="cus"/>-->
                                                                        </td>
                                                                        <td style="border: 1px solid #000; text-align: left">
                                                                            <span t-field="inv.account_move_id.x_studio_document_no"/>
                                                                        </td>
                                                                        <t t-set="li"
                                                                           t-value="de.account_move_line_id"/>
                                                                        <td style="border: 1px solid #000; text-align: left">
                                                                            <span t-field="li.product_barcode"/>
                                                                        </td>
                                                                        <td style="border: 1px solid #000; border-top: 0; border-right: 0; text-align: left;">
                                                                            <span t-field="li.product_id"/>
                                                                        </td>
                                                                        <td style="border: 1px solid #000; border-top: 0; border-right: 0;  text-align: left;">
                                                                            <span t-field="li.invoice_custom_standardnumber"/>
                                                                        </td>
                                                                        <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: left;"
                                                                            class="text-right">
                                                                            <t t-set="pro" t-value="li.product_id"/>
                                                                            <span t-field="pro.product_maker_name"/>
                                                                        </td>
                                                                        <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                                            <span t-field="li.product_name"/>
                                                                        </td>
                                                                        <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                                            <span t-field="li.quantity"/>
                                                                        </td>
                                                                        <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                                            <span t-field="li.price_unit"/>
                                                                        </td>
                                                                        <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                                            <span t-field="li.invoice_custom_lineamount"/>
                                                                        </td>
                                                                    </tr>
                                                                </t>
                                                            </t>
                                                        </t>
                                                    </t>
                                                </t>
                                            </t>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </t>
                </t>
            </t>
            <t t-else="">
                <t t-set="bill_invoices" t-value="a.bill_invoice_ids"/>
                <t t-foreach="bill_invoices" t-as="bill_inv">
                    <t t-set="cus0" t-value="bill_inv.customer_code"/>
                    <t t-if="cus0 != cus">
                        <t t-set="acc_move" t-value="bill_inv.account_move_id"/>
                        <t t-set="res_part" t-value="acc_move.partner_id"/>
                        <t t-set="re_acc" t-value="res_part.invoice_ids"/>
                        <!--                    <span t-field="bill_inv.customer_code"></span>-->


                        <div style="page-break-after:always">
                            <span>取引先コード: </span>
                            <span t-field="bill_inv.customer_code">
                            </span><br/>
                            <span>取引先名: </span>
                            <span t-field="bill_inv.customer_name"/>
                            <div id="detail_table" style="border: 1.5px solid #000;">
                                <div style="min-height: auto">
                                    <table border="0" cellspacing="0" style="width: 100%; font-size: 12px;">
                                        <thead>
                                            <tr>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_id"><span>日付</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_id"><span>伝票Ｎｏ</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_id"><span>JANコード</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_id"><span>商品コード</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_id"><span>品番/型番</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_description"><span>メーカー名</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_priceunit"><span>商品名</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_taxes"><span>数量</span></td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_subtotal">単価</td>
                                                <td style="border: 1px solid #000; text-align: center; background-color: #e0e0e0"
                                                    name="th_subtotal">金額</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <t t-foreach="re_acc" t-as="ac">
                                                <t t-if="ac.bill_invoice_ids.id">
                                                    <t t-foreach="ac.bill_invoice_ids" t-as="inv">
                                                        <t t-if="inv.amount_total !=0">
                                                            <t t-set="detail" t-value="inv.bill_invoice_details_ids"/>
                                                            <t t-set="cus" t-value="ac.bill_invoice_ids.customer_code"/>
                                                            <t t-foreach="detail" t-as="de">
                                                                <tr>
                                                                    <td style="border: 1px solid #000; text-align: left">
                                                                        <span t-field="inv.bill_date">
                                                                        </span>
                                                                        <!--                                                                <span t-esc="cus"/>-->
                                                                    </td>
                                                                    <td style="border: 1px solid #000; text-align: left">
                                                                        <span t-field="inv.account_move_id.x_studio_document_no"/>
                                                                    </td>
                                                                    <t t-set="li" t-value="de.account_move_line_id"/>
                                                                    <td style="border: 1px solid #000; text-align: left">
                                                                        <span t-field="li.product_barcode"/>
                                                                    </td>
                                                                    <td style="border: 1px solid #000; border-top: 0; border-right: 0; text-align: left;">
                                                                        <span t-field="li.product_id"/>
                                                                    </td>
                                                                    <td style="border: 1px solid #000; border-top: 0; border-right: 0;  text-align: left;">
                                                                        <span t-field="li.invoice_custom_standardnumber"/>
                                                                    </td>
                                                                    <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: left;"
                                                                        class="text-right">
                                                                        <t t-set="pro" t-value="li.product_id"/>
                                                                        <span t-field="pro.product_maker_name"/>
                                                                    </td>
                                                                    <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                                        <span t-field="li.product_name"/>
                                                                    </td>
                                                                    <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                                        <span t-field="li.quantity"/>
                                                                    </td>
                                                                    <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                                        <span t-field="li.price_unit"/>
                                                                    </td>
                                                                    <td style="border: 1px solid #000; border-right: 0; border-top: 0; text-align: right">
                                                                        <span t-field="li.invoice_custom_lineamount"/>
                                                                    </td>
                                                                </tr>
                                                            </t>
                                                        </t>
                                                    </t>
                                                </t>
                                            </t>

                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </t>
                </t>
            </t>
        </template>
    </data>
</odoo>