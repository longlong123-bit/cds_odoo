<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="yamasa_report">
            <!-- total_record_detail = total_detail + total_line_tax_of_invoice + total_line_of_【合計、税別御買上計、消費税】-->
            <t t-set="total_record_detail" t-value="o.count_detail_line() + 3*len(o.bill_invoice_ids) + 9"/>
            <t t-set="total_page_detail" t-value="2"/>
            <t t-if="total_record_detail &gt; 50">
                <t t-set="total_page2_detail" t-value="(total_record_detail - 50)/56"/>
                <t t-if="1 &gt; total_page2_detail">
                    <t t-set="total_page2_detail" t-value="1"/>
                </t>
                <t t-set="total_page_detail" t-value="int(total_page2_detail + 0.9 + 2)"/>
            </t>
            <t t-set="total_page_detail_tax" t-value="total_page_detail"/>
            <t t-set="count_page_detail" t-value="0"/>
            <t t-set="count_rows_total_page" t-value="1"/>
            <t t-set="count_detail" t-value="1"/>
            <t t-set="pager" t-value="0"/>
            <t t-set="o" t-value="o.with_context(lang=lang)"/>
            <t t-set="tax_transfer_previous_data" t-value=""/>
            <t t-set="amount_tax_previous_data" t-value="0"/>
            <t t-foreach="range(1, total_page_detail)" t-as="range_total_page_detail">
                <t t-set="count_detail" t-value="1"/>
                <t t-set="pager" t-value="pager + 1"/>
                <div class="page"
                     style="page-break-before: always; font-size: 14px; line-height: 1.2; font-family: メイリオ;">
                    <div style="display: inline-block;">
                        <t t-set="style_title" t-value="'width: 38%; float: left;'"/>
                        <t t-set="style_bill_no" t-value="'width: 40%; float: left;'"/>
                        <t t-set="o_title" t-value="'請　求　書'"/>
                        <t t-if="range_docs_index == 2">
                            <t t-set="o_title" t-value="'請　求　書【控】'"/>
                            <t t-set="style_title" t-value="'width: 44%; float: left;'"/>
                            <t t-set="style_bill_no" t-value="'width: 34%; float: left;'"/>
                        </t>
                        <div style="display: inline-block; width: 100%;">
                            <div style="width: 22%; float: left;">
                                <div>
                                    <span>お客様コードNo.</span>
                                    <span t-field="o.partner_id.customer_code"/>
                                </div>
                            </div>
                            <div t-att-style="style_title">
                                <div style="float: right; margin-right: 9%;">
                                    <h4 class="mt0"
                                        style="font-size: 26px; font-weight: 800; color: #000000; margin: 0; padding: 0"
                                        t-esc="o_title"/>
                                </div>
                            </div>
                            <div t-att-style="style_bill_no">
                                <div style="text-align: right; margin-top: 15px;">
                                    <span class="mt0" t-field="o.bill_no"
                                          style="color: #000000; margin: 0; padding: 0"/>
                                    -
                                    <span t-esc="pager"/>
                                </div>
                            </div>
                        </div>

                        <div>
                            <div style="text-align: center;">
                                <t t-if="o.deadline">
                                    <span t-field="o.deadline"
                                          t-options="{&quot;format&quot;: &quot;yyyy年MM月dd日&quot;}"/>
                                </t>
                                <span t-else="">　　　年　　月　　日</span>
                                <span>締切分 (</span>
                                <span t-field="o.partner_id.customer_closing_date.closing_date_code"/>
                                <span>)</span>
                            </div>
                            <div style="display: inline-block; width: 100%; height: 224px">
                                <div style="margin-top: 10px; width: 50%; display: inline-block;">
                                    <div style="margin-bottom: 10px; margin-left: 30px; height: 16px;">
                                        <span t-field="o.partner_id.zip_code">
                                            <null/>
                                        </span>
                                    </div>
                                    <div style="margin-bottom: 10px; margin-left: 20px; height: 38px; font-size: 16px; width: 384px">
                                        <p t-field="o.partner_id.street"
                                           style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                            <null/>
                                        </p>
                                        <p t-field="o.partner_id.street2"
                                           style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                            <null/>
                                        </p>
                                    </div>
                                    <div style="display: inline-block; width: 384px; margin-left: 20px; margin-bottom: 10px; font-size: 16px;">
                                        <t t-set="p_style"
                                           t-value="'height: 19px; white-space: nowrap; max-width: 384px; overflow: hidden; text-overflow: clip; margin: 0; float: left;'"/>
                                        <p t-field="o.partner_id.name"
                                           style="height: 19px; white-space: nowrap; max-width: 384px; overflow: hidden; text-overflow: clip; margin: 0; float: left;"/>
                                        <t t-if="o.partner_id.customer_name_2">
                                            <br/>
                                            <p t-field="o.partner_id.customer_name_2"
                                               style="height: 19px; white-space: nowrap; max-width: 365px; overflow: hidden; text-overflow: clip; margin: 0; float: left;">
                                            </p>
                                        </t>
                                        <p style="float: right; margin: 0;">様</p>
                                    </div>
                                    <div style="display: inline-block; width: 384px; margin-left: 20px; font-size: 16px;">
                                        <span>TEL:　</span>
                                        <span t-field="o.partner_id.customer_phone"/>
                                        <span>　FAX:　</span>
                                        <span t-field="o.partner_id.customer_fax"/>
                                    </div>
                                    <div style="margin-top: 54px; margin-left: 10px;">
                                        <span>毎度ありがとうございます。下記の通り御請求申し上げます。</span>
                                    </div>
                                </div>
                                <div style="width: 42%; float: right; text-align: center; font-size: 16px; margin-top: 9px;">
                                    <div style="font-size: 14px; text-align: left; padding-left: 40px; width: 370px; white-space: nowrap; overflow: hidden; text-overflow: clip; margin-bottom: 2px;">
                                        <span>買付先コード　</span>
                                        <span t-esc="o.partner_id.customer_other_cd"/>
                                    </div>
                                    <span style="font-size: 24px; font-weight: 600">株式会社　ト　ラ　ヤ</span>
                                    <br/>
                                    <span>代表取締役　　遠 藤 孝 二</span>
                                    <br/>
                                    <span>本　社　千葉県銚子市新生町2丁目12番地の5</span>
                                    <br/>
                                    <span>TEL　0479-22-3515　FAX　0479-24-9376</span>
                                    <br/>
                                    <span>神栖営業所　茨 城 県 神 栖 市 溝 口 6 3 2 - 2</span>
                                    <br/>
                                    <span>TEL　0299-97-4416　FAX　0299-90-6530</span>
                                    <div style="margin-top: 2%; font-size: 14px;">
                                        <span t-field="user.company_id.company_bank_name_1">
                                            <null/>
                                        </span>
                                        <span t-esc="user.company_id.company_bank_account_1">
                                            <null/>
                                        </span>
                                        <br/>
                                        <span t-field="user.company_id.company_bank_name_2">
                                            <null/>
                                        </span>
                                        <span t-esc="user.company_id.company_bank_account_2">
                                            <null/>
                                        </span>
                                        <br/>
                                        <span t-field="user.company_id.company_bank_name_3">
                                            <null/>
                                        </span>
                                        <span t-esc="user.company_id.company_bank_account_3">
                                            <null/>
                                        </span>
                                        <br/>
                                        <span t-field="user.company_id.company_bank_name_4">
                                            <null/>
                                        </span>
                                        <span t-esc="user.company_id.company_bank_account_4">
                                            <null/>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <t t-if="pager == 1">
                            <div style="width: 100%;">
                                <div style="width: 84%; margin-bottom: 10px; float: left;">
                                    <table border="0" cellspacing="0" cellpadding="5"
                                           style="width: 100%; line-height: 1; font-size: 14px; font-family: Lato; height: 80px">
                                        <thead>
                                            <tr>
                                                <td style="border: 1px solid #000000; border-right: 0; text-align: center;">
                                                    前 回 御 請 求 額
                                                </td>
                                                <td style="border: 1px solid #000000; border-right: 0; text-align: center;">
                                                    御　入　金　額
                                                </td>
                                                <td style="border: 1px solid #000000; border-right: 0; text-align: center">
                                                    調　整　額
                                                </td>
                                                <td style="border: 1px solid #000000; border-right: 0; text-align: center">
                                                    当 月 御 買 上 額
                                                </td>
                                                <td style="border: 1px solid #000000; border-right: 0; text-align: center">
                                                    当 月 消 費 税 額
                                                </td>
                                                <td style="border: 1px solid #000000; text-align: center">
                                                    当 月 御 請 求 額
                                                </td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; height: 38px;">
                                                    <div style="display: inline-block; width: 110px; text-align: center; padding-top: 11px;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            <null/>
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: right;">
                                                    <div style="float: right; width: 110px; text-align: center; padding-top: 11px;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            <null/>
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: center;">
                                                    <div style="width: 110px; text-align: center; padding-top: 11px;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            <null/>
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: right;">
                                                    <div style="float: right; width: 110px; text-align: center; padding-top: 11px;">
                                                        <p t-esc="'{0:,.0f}'.format(o.subtotal_amount_tax(8) + o.subtotal_amount_tax(10) + o.subtotal_amount_tax())"
                                                           style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            <null/>
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: right;">
                                                    <div style="float: right; width: 110px; text-align: center; padding-top: 11px;">
                                                        <p t-esc="'{0:,.0f}'.format(o.amount_tax(8) + o.amount_tax(10) + o.amount_tax())"
                                                           style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            <null/>
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; border-right: 1px solid #000000; text-align: left;">
                                                    <div style="display: inline-block; width: 112px; text-align: center; padding-top: 11px;">
                                                        <p t-esc="'{0:,.0f}'.format(o.amount_total)"
                                                           style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            <null/>
                                                        </p>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div style="width: 16%; float: left;">
                                    <span style="border: 1px solid #000000; width: 66px; height: 78px; border-right: none; float: left; margin-left: 10px;"/>
                                    <span style="border: 1px solid #000000; width: 66px; height: 78px; float: left;"/>
                                </div>
                            </div>
                        </t>
                        <div style="width: 100%;">
                            <table border="0" cellspacing="0" cellpadding="5"
                                   style="width: 100%; line-height: 1; font-size: 14px; font-family: Lato; border: 1px solid #000000">
                                <thead>
                                    <tr>
                                        <td style="border: 1px solid #000000; border-top: 0; border-left: 0; border-right: 0; text-align: center;">
                                            伝 票 日 付
                                        </td>
                                        <td style="border: 1px solid #000000;border-top: 0; border-right: 0; text-align: center;">
                                            伝票No
                                        </td>
                                        <td style="border: 1px solid #000000;border-top: 0; border-right: 0; text-align: center;">
                                            品　　　　　　名
                                        </td>
                                        <td style="border: 1px solid #000000; border-top: 0;border-right: 0; text-align: center;">
                                            数　量
                                        </td>
                                        <td style="border: 1px solid #000000;border-top: 0; border-right: 0; text-align: center;">
                                            単 位
                                        </td>
                                        <td style="border: 1px solid #000000;border-top: 0; border-right: 0; text-align: center;">
                                            単　　　価
                                        </td>
                                        <td style="border: 1px solid #000000;border-top: 0;border-right: 0; text-align: center;">
                                            金　　　額
                                        </td>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-set="inv_date" t-value=""/>
                                    <t t-set="inv_no" t-value=""/>
                                    <t t-set="count_invoice_detail" t-value="0"/>
                                    <t t-foreach="o.bill_detail_ids.sorted(key=lambda r: (r.invoice_date, r.invoice_no))"
                                       t-as="line_detail">
                                        <t t-set="count_invoice_detail" t-value="count_invoice_detail + line_detail.count_detail_line()"/>
                                        <t t-if="((pager == 1 and 50 &gt;= count_detail) or (pager &gt; 1 and 56 &gt;= count_detail)) and count_invoice_detail &gt;= count_page_detail">
                                            <t t-if="(pager == 1 and count_detail == 50) or (pager &gt; 1 and count_detail == 56)">
                                                <t t-set="count_page_detail" t-value="count_invoice_detail + 1"/>
                                            </t>
                                            <t t-if="inv_no and tax_transfer_previous_data and inv_no != line_detail.invoice_no and ((pager == 1 and 50 >= count_detail) or (pager > 1 and 56 >= count_detail)) and (count_invoice_detail >= count_page_detail)">
                                                <tr style="height: 45px; vertical-align: top;">
                                                    <td style="padding-bottom: 0;">
                                                        <div style="display: inline-block; width: 70px; text-align: center;">
                                                            <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                                <null/>
                                                            </p>
                                                        </div>
                                                    </td>
                                                    <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                        <div style="display: inline-block; width: 100px; text-align: center;">
                                                            <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                                <null/>
                                                            </p>
                                                        </div>
                                                    </td>
                                                    <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                        <div t-if="tax_transfer_previous_data == 'foreign_tax' or tax_transfer_previous_data == 'voucher'"
                                                             style="display: inline-block; width: 359px;">
                                                            <span style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                                消費税
                                                            </span>
                                                        </div>
                                                    </td>
                                                    <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                        <div style="display: inline-block; width: 75px; text-align: right;">
                                                            <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            </p>
                                                        </div>
                                                    </td>
                                                    <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                        <div style="display: inline-block; width: 34px; text-align: center;">
                                                            <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            </p>
                                                        </div>
                                                    </td>
                                                    <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                        <div style="display: inline-block; width: 100px; text-align: right;">
                                                            <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            </p>
                                                        </div>
                                                    </td>
                                                    <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                        <div style="display: inline-block; width: 100px; text-align: right;">
                                                            <p t-if="(tax_transfer_previous_data == 'foreign_tax' or tax_transfer_previous_data == 'voucher')"
                                                               t-esc="'{0:,.0f}'.format(amount_tax_previous_data)"
                                                               style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            </p>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <t t-set="count_detail" t-value="count_detail + 3"/>
                                            </t>
                                            <!--Set tax transfer of the previous data-->
                                            <t t-set="tax_transfer_previous_data"
                                               t-value="line_detail.x_voucher_tax_transfer"/>
                                            <!--Set amount tax of the previous data-->
                                            <t t-set="amount_tax_previous_data"
                                               t-value="line_detail.bill_invoice_id.amount_tax"/>

                                            <t t-if="((pager == 1 and 50 >= count_detail) or (pager > 1 and 56 >= count_detail))">
                                                <tr style="max-height: 45px; vertical-align: top; overflow: hidden;">
                                                    <td style="padding-bottom: 0;">
                                                        <div style="display: inline-block; width: 70px; text-align: center;">
                                                            <p t-if="inv_date !=line_detail.invoice_date"
                                                               t-field="line_detail.invoice_date"
                                                               t-options="{&quot;format&quot;: &quot;yy/MM/dd&quot;}"
                                                               style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                                <null/>
                                                            </p>
                                                            <t t-set="inv_date" t-value="line_detail.invoice_date"/>
                                                        </div>
                                                    </td>
                                                    <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                        <div style="display: inline-block; width: 100px; text-align: center;">
                                                            <p t-if="inv_no != line_detail.invoice_no"
                                                               t-field="line_detail.invoice_no"
                                                               style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                                <null/>
                                                            </p>
                                                            <t t-set="inv_no" t-value="line_detail.invoice_no"/>
                                                        </div>
                                                    </td>
                                                    <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                        <div t-if="line_detail.account_move_line_id"
                                                             style="display: inline-block; width: 359px;">
                                                            <span t-field="line_detail.product_name"
                                                                  style="max-height: 26px;text-overflow: clip; vertical-align: top; display: inline-block; max-width: 230px; overflow: hidden; margin: 0;">
                                                            </span>
                                                            <span t-field="line_detail.product_maker_name"
                                                                  style="max-width: 62px;text-overflow: clip; display: inline-block; white-space: nowrap; overflow: hidden; margin: 0; vertical-align: top;">
                                                            </span>
                                                            <span t-field="line_detail.product_custom_standardnumber"
                                                                  style="max-width: 62px; text-overflow: clip;white-space: nowrap; display: inline-block; overflow: hidden; margin: 0; vertical-align: top;">
                                                            </span>
                                                            <br/>
                                                            <span t-if="line_detail.account_move_line_id.product_id.product_tax_category == 'exempt'">
                                                                ※非課税
                                                            </span>
                                                            <span t-elif="line_detail.tax_rate ==8">※軽減税率</span>
                                                        </div>
                                                        <div t-else="" style="display: inline-block; width: 359px;">
                                                            <span tyle="max-height: 26px; vertical-align: top; display: inline-block; max-width: 235px; overflow: hidden; margin: 0;">
                                                                【入金　（</span>
                                                            <span t-field="line_detail.payment_category"
                                                                  style="max-width: 62px; white-space: nowrap; overflow: hidden; margin: 0; vertical-align: top;">
                                                            </span>
                                                            <span style="max-width: 62px; white-space: nowrap; overflow: hidden; margin: 0; vertical-align: top;">
                                                                ）】
                                                            </span>
                                                        </div>
                                                    </td>
                                                    <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                        <div style="display: inline-block; width: 75px; text-align: right;">
                                                            <p t-if="line_detail.account_move_line_id" t-esc="'{0:,.0f}'.format(line_detail.quantity)"
                                                               style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            </p>
                                                        </div>
                                                    </td>
                                                    <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                        <div style="display: inline-block; width: 34px; text-align: center;">
                                                            <p t-if="line_detail.account_move_line_id" t-field="line_detail.product_uom"
                                                               style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            </p>
                                                        </div>
                                                    </td>
                                                    <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                        <div style="display: inline-block; width: 100px; text-align: right;">
                                                            <span t-if="line_detail.account_move_line_id" t-esc="'{0:,.2f}'.format(line_detail.price_unit)"
                                                                  style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            </span>
                                                            <span t-if="line_detail.x_voucher_tax_transfer == 'internal_tax'">
                                                                ※</span>
                                                        </div>
                                                    </td>
                                                    <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                        <div style="display: inline-block; width: 100px; text-align: right;">
                                                            <p t-esc="'{0:,.0f}'.format(line_detail.line_amount)"
                                                               style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            </p>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <t t-set="count_detail" t-value="count_detail + line_detail.count_detail_line()"/>
                                            </t>
                                        </t>
                                    </t>

                                    <t t-if="tax_transfer_previous_data and ((pager == 1 and 50 >= count_detail) or (pager > 1 and 56 >= count_detail)) and (count_invoice_detail >= count_page_detail - 1)">
                                        <tr style="height: 45px; vertical-align: top;">
                                            <td style="padding-bottom: 0;">
                                                <div style="display: inline-block; width: 70px; text-align: center;">
                                                    <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                        <null/>
                                                    </p>
                                                </div>
                                            </td>
                                            <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                <div style="display: inline-block; width: 100px; text-align: center;">
                                                    <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                        <null/>
                                                    </p>
                                                </div>
                                            </td>
                                            <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                <div t-if="tax_transfer_previous_data == 'foreign_tax' or tax_transfer_previous_data == 'voucher'"
                                                     style="display: inline-block; width: 359px;">
                                                    <span style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                        消費税
                                                    </span>
                                                </div>
                                            </td>
                                            <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                <div style="display: inline-block; width: 75px; text-align: right;">
                                                    <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                    </p>
                                                </div>
                                            </td>
                                            <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                <div style="display: inline-block; width: 34px; text-align: center;">
                                                    <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                    </p>
                                                </div>
                                            </td>
                                            <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                <div style="display: inline-block; width: 100px; text-align: right;">
                                                    <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                    </p>
                                                </div>
                                            </td>
                                            <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                <div style="display: inline-block; width: 100px; text-align: right;">
                                                    <p t-if="(tax_transfer_previous_data == 'foreign_tax' or tax_transfer_previous_data == 'voucher')"
                                                       t-esc="'{0:,.0f}'.format(amount_tax_previous_data)"
                                                       style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                    </p>
                                                </div>
                                            </td>
                                        </tr>
                                        <t t-set="count_detail" t-value="count_detail + 3"/>
                                        <t t-set="tax_transfer_previous_data" t-value=""/>
                                    </t>

                                    <t t-if="o.partner_id.customer_tax_unit == 'invoice'">
                                        <t t-if="((pager == 1 and 50 &gt;= count_detail) or (pager &gt; 1 and 56 &gt;= count_detail)) and (count_invoice_detail &gt;= count_page_detail - 1) and count_rows_total_page == 1">
                                            <t t-set="count_rows_total_page" t-value="2"/>
                                            <tr style="max-height: 45px;vertical-align: top; overflow: hidden;">
                                                <td style="padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 70px; text-align: center;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            <null/>
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 100px; text-align: center;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            <null/>
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 359px;">
                                                        <div style="display: inline-block; width: 40%; float: left; text-align: left;">
                                                            （税別御買上計）
                                                        </div>
                                                        <div style="display: inline-block; width: 60%; float: right; text-align: left;">
                                                            <t>
                                                                <span>（10％消費税）</span>
                                                                <br/>
                                                            </t>
                                                            <t>
                                                                <span>（8％消費税）</span>

                                                            </t>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 75px; text-align: right;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 34px; text-align: center;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 100px; text-align: right;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 100px; text-align: right;">
                                                        <span t-esc="'{0:,.0f}'.format(o.subtotal_amount_tax(10))"/><br/>
                                                        <span t-esc="'{0:,.0f}'.format(o.subtotal_amount_tax(8))"/><br/>
                                                        <span t-if="o.subtotal_amount_tax()" t-esc="'{0:,.0f}'.format(o.subtotal_amount_tax())"/>
                                                    </div>
                                                </td>
                                            </tr>
                                            <t t-if="o.subtotal_amount_tax()" t-set="count_detail" t-value="count_detail + 3"/>
                                            <t t-else="" t-set="count_detail" t-value="count_detail + 2"/>
                                        </t>
                                        <t t-if="((pager == 1 and 50 &gt;= count_detail) or (pager &gt; 1 and 56 &gt;= count_detail)) and (count_invoice_detail &gt;= count_page_detail - 1) and count_rows_total_page == 2">
                                            <t t-set="count_rows_total_page" t-value="3"/>
                                            <tr style="max-height: 45px;vertical-align: top; overflow: hidden;">
                                                <td style="padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 70px; text-align: center;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            <null/>
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 100px; text-align: center;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            <null/>
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 359px;">
                                                        <div style="display: inline-block; width: 40%; float: left; text-align: left;">
                                                            （消費税）
                                                        </div>
                                                        <div style="display: inline-block; width: 60%; float: right; text-align: left;">
                                                            <t>
                                                                <span>（10％消費税）</span>
                                                                <br/>
                                                            </t>
                                                            <t>
                                                                <span>（8％消費税）</span>

                                                            </t>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 75px; text-align: right;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 34px; text-align: center;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 100px; text-align: right;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 100px; text-align: right;">
                                                        <span t-esc="'{0:,.0f}'.format(o.amount_tax(10))"/><br/>
                                                        <span t-esc="'{0:,.0f}'.format(o.amount_tax(8))"/><br/>
                                                        <span t-if="o.amount_tax()" t-esc="'{0:,.0f}'.format(o.amount_tax())"/>
                                                    </div>
                                                </td>
                                            </tr>
                                            <t t-if="o.amount_tax()" t-set="count_detail" t-value="count_detail + 3"/>
                                            <t t-else="" t-set="count_detail" t-value="count_detail + 2"/>
                                        </t>
                                        <t t-if="((pager == 1 and 50 &gt;= count_detail) or (pager &gt; 1 and 56 &gt;= count_detail)) and (count_invoice_detail &gt;= count_page_detail - 1) and count_rows_total_page == 3">
                                            <tr style="height: 15px;vertical-align: top; overflow: hidden;">
                                                <td style="padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 70px; text-align: center;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            <null/>
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 100px; text-align: center;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            <null/>
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 359px;">
                                                        <span style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            【税込御買上計　】
                                                        </span>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 75px; text-align: right;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 34px; text-align: center;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 100px; text-align: right;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 100px; text-align: right;">
                                                        <span t-esc="'{0:,.0f}'.format(o.amount_total)"/>
                                                    </div>
                                                </td>
                                            </tr>
                                            <t t-set="count_detail" t-value="count_detail + 1"/>
                                        </t>
                                    </t>
                                    <t t-else="">
                                        <t t-if="((pager == 1 and 50 &gt;= count_detail) or (pager &gt; 1 and 56 &gt;= count_detail)) and (count_invoice_detail &gt;= count_page_detail - 1) and count_rows_total_page == 1">
                                            <t t-set="count_rows_total_page" t-value="2"/>
                                            <tr style="height: 15px;vertical-align: top; overflow: hidden;">
                                                <td style="padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 70px; text-align: center;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            <null/>
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 100px; text-align: center;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            <null/>
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 359px;">
                                                        <span style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            【税込御買上計　】
                                                        </span>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 75px; text-align: right;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 34px; text-align: center;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 100px; text-align: right;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 100px; text-align: right;">
                                                        <span t-esc="'{0:,.0f}'.format(o.amount_total)"/>
                                                    </div>
                                                </td>
                                            </tr>
                                            <t t-set="count_detail" t-value="count_detail + 1"/>
                                        </t>
                                        <t t-if="((pager == 1 and 50 &gt;= count_detail) or (pager &gt; 1 and 56 &gt;= count_detail)) and (count_invoice_detail &gt;= count_page_detail - 1) and count_rows_total_page == 2">
                                            <t t-set="count_rows_total_page" t-value="3"/>
                                            <tr style="max-height: 45px;vertical-align: top; overflow: hidden;">
                                                <td style="padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 70px; text-align: center;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            <null/>
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 100px; text-align: center;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            <null/>
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 359px;">
                                                        <div style="display: inline-block; width: 40%; float: left; text-align: left;">
                                                            （税別御買上計）
                                                        </div>
                                                        <div style="display: inline-block; width: 60%; float: right; text-align: left;">
                                                            <t>
                                                                <span>（10％消費税）</span>
                                                                <br/>
                                                            </t>
                                                            <t>
                                                                <span>（8％消費税）</span>

                                                            </t>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 75px; text-align: right;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 34px; text-align: center;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 100px; text-align: right;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 100px; text-align: right;">
                                                        <span t-esc="'{0:,.0f}'.format(o.subtotal_amount_tax(10))"/><br/>
                                                        <span t-esc="'{0:,.0f}'.format(o.subtotal_amount_tax(8))"/><br/>
                                                        <span t-if="o.subtotal_amount_tax()" t-esc="'{0:,.0f}'.format(o.subtotal_amount_tax())"/>
                                                    </div>
                                                </td>
                                            </tr>
                                            <t t-if="o.subtotal_amount_tax()" t-set="count_detail" t-value="count_detail + 3"/>
                                            <t t-else="" t-set="count_detail" t-value="count_detail + 2"/>
                                        </t>
                                        <t t-if="((pager == 1 and 50 &gt;= count_detail) or (pager &gt; 1 and 56 &gt;= count_detail)) and (count_invoice_detail &gt;= count_page_detail - 1) and count_rows_total_page == 3">
                                            <tr style="max-height: 45px;vertical-align: top; overflow: hidden;">
                                                <td style="padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 70px; text-align: center;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            <null/>
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 100px; text-align: center;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                            <null/>
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 359px;">
                                                        <div style="display: inline-block; width: 40%; float: left; text-align: left;">
                                                            （消費税）
                                                        </div>
                                                        <div style="display: inline-block; width: 60%; float: right; text-align: left;">
                                                            <t>
                                                                <span>（10％消費税）</span>
                                                                <br/>
                                                            </t>
                                                            <t>
                                                                <span>（8％消費税）</span>

                                                            </t>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 75px; text-align: right;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 34px; text-align: center;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 100px; text-align: right;">
                                                        <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;">
                                                        </p>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; padding-bottom: 0;">
                                                    <div style="display: inline-block; width: 100px; text-align: right;">
                                                        <span t-esc="'{0:,.0f}'.format(o.amount_tax(10))"/><br/>
                                                        <span t-esc="'{0:,.0f}'.format(o.amount_tax(8))"/><br/>
                                                        <span t-if="o.amount_tax()" t-esc="'{0:,.0f}'.format(o.amount_tax())"/>
                                                    </div>
                                                </td>
                                            </tr>
                                            <t t-if="o.amount_tax()" t-set="count_detail" t-value="count_detail + 3"/>
                                            <t t-else="" t-set="count_detail" t-value="count_detail + 2"/>
                                        </t>
                                    </t>

                                    <!--Set count_page_detail when record detail is smaller than record detail of default page-->
                                    <t t-if="(pager == 1 and 50 &gt; count_invoice_detail) or (pager &gt; 1 and 56 &gt; count_invoice_detail)">
                                        <t t-set="count_page_detail" t-value="count_invoice_detail + 1"/>
                                    </t>
                                    <!--Display 【合計、税別御買上計、消費税】 at the end page invoice-->
                                    <t t-if="range_total_page_detail == (total_page_detail - 1)">
                                        <t t-set="rows_detail_default" t-value="50"/>
                                        <t t-if="pager &gt; 1">
                                            <t t-set="rows_detail_default" t-value="56"/>
                                        </t>
                                        <t t-if="rows_detail_default &gt; count_detail">
                                            <!--line_empty = rows_detail_default - (rows_detail + total_rows_of_【合計、税別御買上計、消費税】))-->
                                            <t t-set="line_empty" t-value="rows_detail_default - (count_detail - 1)"/>
                                            <t t-foreach="range(0,line_empty)" t-as="range_line_empty">
                                                <tr style="height: 15px;vertical-align: top;">
                                                    <td style="padding-bottom: 0;"/>
                                                    <td style="border-left: 1px solid #000000; padding-bottom: 0;"/>
                                                    <td style="border-left: 1px solid #000000; padding-bottom: 0;"/>
                                                    <td style="border-left: 1px solid #000000; padding-bottom: 0;"/>
                                                    <td style="border-left: 1px solid #000000; padding-bottom: 0;"/>
                                                    <td style="border-left: 1px solid #000000; padding-bottom: 0;"/>
                                                    <td style="border-left: 1px solid #000000; padding-bottom: 0;"/>
                                                </tr>
                                            </t>
                                        </t>
                                    </t>
                                </tbody>
                            </table>
                            <div style=" padding: 10px 40px 0 0; text-align: center; max-width: 62%; float: right;">
                                <span>単価の※印は税込商品です。</span>
                            </div>
                        </div>
                    </div>
                </div>
            </t>
        </template>
    </data>
</odoo>
