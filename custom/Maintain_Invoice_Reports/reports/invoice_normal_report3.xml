<!--Custom report.-->
<odoo>
    <data>
        <template id="invoice_normal_report3">
            <t t-set="line_id" t-value="0"/>
            <t t-set="line_id_1" t-value="line_id"/>
            <t t-set="line_id_2" t-value="line_id"/>
            <t t-set="line_id_3" t-value="line_id"/>
            <t t-set="pager" t-value="1"/>
            <t t-set="len_invoice_line" t-value="len(o.invoice_line_ids)"/>
            <t t-set="subtotal_amount" t-value="0"/>
            <t t-set="subtotal_amount_10" t-value="0"/>
            <t t-set="subtotal_amount_8" t-value="0"/>
            <t t-set="subtotal_tax_amount" t-value="0"/>
            <t t-set="subtotal_tax_amount_10" t-value="0"/>
            <t t-set="subtotal_tax_amount_8" t-value="0"/>
            <t t-set="subtotal_voucher_tax_amount" t-value="0"/>
            <t t-set="subtotal_voucher_tax_amount_10" t-value="0"/>
            <t t-set="subtotal_voucher_tax_amount_8" t-value="0"/>
            <t t-set="total" t-value="0"/>
            <t t-set="o" t-value="o.with_context(lang=user.partner_id.lang)"/>
            <t t-foreach="o.invoice_line_ids.sorted(key=lambda r: r.invoice_custom_line_no)" t-as="account_move_line">
                <!--Row Tax Transfer = (foreign_tax, internal_tax)-->
                <t t-if="o.x_voucher_tax_transfer == 'foreign_tax' or o.x_voucher_tax_transfer == 'internal_tax'">
                    <t t-set="subtotal_tax_amount_10" t-value="0"/>
                    <t t-set="subtotal_tax_amount_8" t-value="0"/>
                    <t t-set="total" t-value="0"/>
                </t>
                <t t-if="account_move_line.invoice_custom_line_no>line_id_1">
                    <div class="page" style="page-break-after: auto; font-size: 12px !important; line-height: 1.2 !important; font-family: Lato !important;">
                        <t t-set="line_parent" t-value="o.invoice_line_ids"/>
                        <t t-set="detail_line_default" t-value="7"/>
                        <t t-foreach="range(1, 3)" t-as="for_range">
                            <t t-set="div_goods_receipt" t-value="'display: inline-block;'"/>
                            <t t-if="for_range == 2">
                                <t t-set="div_goods_receipt" t-value="'display: inline-block; margin-bottom: 20px'"/>
                            </t>
                            <div t-att-style="div_goods_receipt">
                                <t t-set="o_title" t-value="'売　上　票'"/>
                                <t t-if="for_range == 2">
                                    <t t-set="o_title" t-value="'納　品　書'"/>
                                </t>

                                <t t-if="for_range == 2">
                                    <div style="border: 1px dashed #000;margin-top: 50px;margin-bottom: 20px;"></div>
                                    <div style="display: inline-block; width: 100%;">
                                        <div style="width: 60%; float: left;">
                                            <div style="float: right; margin-right: 9%;">
                                                <h4 class="mt0"
                                                    style="font-size: 24px !important; font-weight: 800 !important; color: #000000; border-bottom: 1px solid #000000; margin: 0; padding: 0" t-esc="o_title"/>
                                            </div>
                                        </div>
                                        <div style="width: 40%; float: left;">
                                            <div style="margin-left: 59%;">
                                                <span t-field="o.x_studio_document_no" class="mt0"
                                                  style="color: #000000; margin: 0; padding: 0"/>
                                                -
                                                <span t-esc="pager"/>
                                            </div>
                                        </div>
                                    </div>
                                </t>
                                <t t-else="">
                                    <div style="display: inline-block; width: 100%;">
                                        <div style="width: 60%; float: left;">
                                            <div style="float: right; margin-right: 9%;">
                                                <h4 class="mt0"
                                                    style="font-size: 24px !important; font-weight: 800 !important; color: #000000; border-bottom: 1px solid #000000; margin: 0; padding: 0" t-esc="o_title"/>
                                            </div>
                                        </div>
                                        <div style="width: 40%; float: left;">
                                            <div style="margin-left: 59%;">
                                                <span t-field="o.x_studio_document_no" class="mt0"
                                                  style="color: #000000; margin: 0; padding: 0"/>
                                                -
                                                <span t-esc="pager"/>
                                            </div>
                                        </div>
                                    </div>
                                </t>

                                <div>
                                    <div>
                                        <div>
                                            <div style="float: left;">
                                                <span>お客様コードNo. </span>
                                                <span t-field="o.partner_id.customer_code"/>
                                            </div>
                                            <div t-if="o.partner_id.customer_print_sales_slip_date" style="margin-right: 150px; float: right;">
                                                <t t-if="o.x_studio_date_printed">
                                                    <span t-esc="o.x_studio_date_printed.strftime('%Y年　%m月 %d日')"/>
                                                </t>
                                                <span t-else="">　　　年　　月　　日</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="display: inline-block; width: 100%; height: 159px">
                                        <div style="margin-top: 10px; margin-bottom: 10px; width: 50%; display: inline-block;">

                                            <div style="margin-bottom: 10px; margin-left: 20px; height: 14px;">
                                                <span t-field="o.partner_id.zip_code"/>
                                            </div>
                                            <div style="margin-bottom: 8px; margin-left: 20px; height: 42px; white-space: nowrap; width: 380px; overflow: hidden;">
                                                <span t-field="o.x_studio_address_1"/><br/>
                                                <span t-field="o.x_studio_address_2"/>
                                            </div>
                                            <div style="display: inline-block; border-bottom: 1px solid; width: 354px; font-size: 14px">
                                                <t t-set="p_style" t-value="'height: 16px; white-space: nowrap; max-width: 280px; overflow: hidden;
                                                            text-overflow: clip; margin: 0; float: left;'"/>
                                                <t t-if="o.x_bussiness_partner_name_2">
                                                    <t t-set="p_style" t-value="'height: 14px; white-space: nowrap; width: 280px; overflow: hidden;
                                                            text-overflow: clip; margin: 0; float: left;'"/>
                                                </t>
                                                <p t-att-style="p_style"
                                                   t-esc="o.limit_charater_field(o.x_studio_name, 20)">
                                                </p>
                                                <t t-if="o.x_bussiness_partner_name_2">
                                                    <br/>
                                                    <p style="height: 14px; white-space: nowrap; max-width: 280px; overflow: hidden;
                                                                text-overflow: clip; margin: 0; float: left;"
                                                       t-esc="o.limit_charater_field(o.x_bussiness_partner_name_2, 20)">
                                                    </p>
                                                </t>
                                                <t t-if="o.partner_id.title">
                                                    <p style="float: left; margin: 0;">　</p>
                                                    <p style="float: right; margin: 0;" t-field="o.partner_id.title"></p>
                                                </t>
                                                <t t-else="">
                                                    <t t-set="o_greeting" t-value="'　様'"/>
                                                    <t t-if="user.partner_id.lang == 'en_US'">
                                                        <t t-set="o_greeting" t-value="'　Mr.'"/>
                                                    </t>
                                                    <p style="float: right; margin: 0;" t-esc="o_greeting"></p>
                                                </t>
                                            </div>
                                            <div style="margin-top: 10px; margin-left: 20px;">
                                                <t t-if="pager == 1">
                                                    <span style="font-size: 15px !important; float: left;">合計金額　</span>
                                                    <span style="font-size: 15px !important; border-bottom: 1px solid; float: left;">￥</span>
                                                    <t t-if="o.x_voucher_tax_transfer == 'custom_tax'">
                                                        <span style="max-width: 168px; font-size: 15px !important;  overflow: hidden; white-space: nowrap;
                                                            border-bottom: 1px solid; float: left;" t-esc="'{0:,.0f}'.format(int(o.amount_untaxed + o.x_voucher_tax_amount))"/>
                                                    </t>
                                                    <t t-else="">
                                                        <span style="max-width: 168px; font-size: 15px !important;  overflow: hidden; white-space: nowrap;
                                                            border-bottom: 1px solid; float: left;" t-esc="'{0:,.0f}'.format(int(o.amount_untaxed + o.amount_tax))"/>
                                                    </t>
                                                    <t t-if="o.x_voucher_tax_transfer == 'invoice'">
                                                        <span style="float: left; margin-top: 3px;">（税別）</span>
                                                    </t>
                                                    <t t-else="">
                                                        <span style="float: left; margin-top: 3px;">（税込）</span>
                                                    </t>
                                                </t>
                                            </div>
                                        </div>
                                        <div style="width: 42%; float: right; text-align: center; font-size: 12px !important; margin-top: 27px">
                                            <span style="font-size: 20px !important">株式会社　ト　ラ　ヤ</span><br/>
                                            <span>代表取締役　　遠 藤 孝 二</span><br/>
                                            <span>本　社　千葉県銚子市新生町二丁目12番地の５</span><br/>
                                            <span>TEL　0479-22-3515　FAX　0479-24-9376</span><br/>
                                            <span>神栖営業所　茨 城 県 神 栖 市 溝 口 6 3 2 - 2</span><br/>
                                            <span>TEL　0299-97-4416　FAX　0299-90-6530</span>
                                            <div style="margin-top: 3%; margin-bottom: 2%; text-align: left; display: inline-block; width: 100%;">
                                                <div style="width: 10%; float: left; margin-left: 42px; border-bottom: 1px solid; height: 17px;">担当：</div>
                                                <div style="width: 71%; white-space: nowrap; overflow: hidden; float: left; border-bottom: 1px solid; height: 17px;">
                                                    <t t-esc="o.sales_rep.name"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <table border="0" cellspacing="0" cellpadding="5"
                                           style="width: 100%; line-height: 1 !important; font-size: 12px !important; font-family: Lato !important;">
                                        <thead>
                                            <tr>
                                                <td style="border: 1px solid #000000; border-right: 0; text-align: center; width: 50%">
                                                    品　番　　・　　　　品　名</td>
                                                <td style="border: 1px solid #000000; border-right: 0; text-align: center; width: 11%">
                                                    数　量</td>
                                                <td style="border: 1px solid #000000; border-right: 0; text-align: center; width: 6%">
                                                    単 位</td>
                                                <td style="border: 1px solid #000000; border-right: 0; text-align: center; width: 11%">
                                                    単　価</td>
                                                <td style="border: 1px solid #000000; border-right: 0; text-align: center; width: 11%">
                                                    金　額</td>
                                                <td style="border: 1px solid #000000; text-align: center; width: 11%">
                                                    備　考</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <t t-set="len_detail" t-value="0"/>
                                            <t t-if="for_range == 1">
                                                <t t-set="subtotal_amount" t-value="0"/>
                                                <t t-set="subtotal_amount_10" t-value="0"/>
                                                <t t-set="subtotal_amount_8" t-value="0"/>
                                            </t>
                                            <t t-foreach="o.invoice_line_ids.sorted(key=lambda r: r.invoice_custom_line_no)" t-as="order">
                                                <t t-if="order.invoice_custom_line_no>=line_id_2 and order.id != line_id_3">
                                                    <t t-if="detail_line_default > 0">
                                                        <t t-set="detail_line_default" t-value="detail_line_default - 1"/>
                                                        <t t-set="line_id_1" t-value="order.invoice_custom_line_no"/>
                                                        <t t-if="for_range == 2">
                                                            <t t-set="line_id_2" t-value="order.invoice_custom_line_no"/>
                                                            <t t-set="line_id_3" t-value="order.id"/>
                                                        </t>
                                                        <t t-if="for_range == 1">
                                                            <t t-set="order_line_tax_amount" t-value="order.line_tax_amount"/>
                                                            <t t-if="o.x_voucher_tax_transfer != 'voucher'">
                                                                <!--Rounding up tax rate-->
                                                                <t t-if="o.customer_tax_rounding == 'round'">
                                                                    <t t-set="order_line_tax_amount" t-value="int(round(order_line_tax_amount, 2) + 0.5)"/>
                                                                </t>
                                                                <t t-elif="o.customer_tax_rounding == 'roundup'">
                                                                    <t t-set="order_line_tax_amount" t-value="int(round(order_line_tax_amount, 2) + 0.9)"/>
                                                                </t>
                                                                <t t-else="">
                                                                    <t t-set="order_line_tax_amount" t-value="int(order_line_tax_amount)"/>
                                                                </t>
                                                            </t>

                                                            <!--Set total when Tax Transfer = custom_tax-->
                                                            <t t-if="o.x_voucher_tax_transfer == 'custom_tax'">
                                                                <t t-set="total" t-value="total + order.invoice_custom_lineamount"/>
                                                            </t>
                                                            <t t-elif="o.x_voucher_tax_transfer == 'voucher'">
                                                                <t t-set="total" t-value="total + order.invoice_custom_lineamount + order.voucher_line_tax_amount"/>
                                                            </t>
                                                            <t t-else="">
                                                                <t t-set="total" t-value="total + order.invoice_custom_lineamount + order_line_tax_amount"/>
                                                            </t>

                                                            <t t-if="order.tax_rate == 10">
                                                                <t t-set="subtotal_amount_10" t-value="subtotal_amount_10 + order.invoice_custom_lineamount"/>
                                                                <t t-set="subtotal_tax_amount_10" t-value="subtotal_tax_amount_10 + order_line_tax_amount"/>
                                                                <t t-set="subtotal_voucher_tax_amount_10" t-value="subtotal_voucher_tax_amount_10 + order.voucher_line_tax_amount"/>
                                                            </t>
                                                            <t t-elif="order.tax_rate == 8">
                                                                <t t-set="subtotal_amount_8" t-value="subtotal_amount_8 + order.invoice_custom_lineamount"/>
                                                                <t t-set="subtotal_tax_amount_8" t-value="subtotal_tax_amount_8 + order_line_tax_amount"/>
                                                                <t t-set="subtotal_voucher_tax_amount_8" t-value="subtotal_voucher_tax_amount_8 + order.voucher_line_tax_amount"/>
                                                            </t>
                                                            <t t-else="">
                                                                <t t-set="subtotal_amount" t-value="subtotal_amount + order.invoice_custom_lineamount"/>
                                                                <t t-set="subtotal_tax_amount" t-value="subtotal_tax_amount + order_line_tax_amount"/>
                                                                <t t-set="subtotal_voucher_tax_amount" t-value="subtotal_voucher_tax_amount + order.voucher_line_tax_amount"/>
                                                            </t>
                                                        </t>

                                                        <tr>
                                                            <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000;">
                                                                <div style="display: inline-block; width: 384px;">
                                                                    <div style="float: left; width: 245px; height: 24px; white-space: nowrap; overflow: hidden;">
                                                                        <span style=" height: 12px;" t-esc="o.limit_charater_field(order.product_name, 20, True)"/><br/>
                                                                        <span style=" height: 12px;" t-esc="o.limit_charater_field(order.product_name, 20, True, False)"/>
                                                                    </div>
                                                                    <div style="float: right; width: 125px;">
                                                                        <div style="float: left; width: 125px; height: 12px; white-space: nowrap; overflow: hidden;">
                                                                            <span t-if="order.product_maker_name"
                                                                                  t-esc="o.limit_charater_field(order.product_maker_name, 10)"/>
                                                                        </div>
                                                                        <div style="float: left; width: 125px; height: 12px; white-space: nowrap; overflow: hidden;">
                                                                            <span t-if="order.invoice_custom_standardnumber"
                                                                                  t-esc="o.limit_charater_field(order.invoice_custom_standardnumber, 10)"/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: right">
                                                                <div style="float: right; width: 61px;">
                                                                    <p style="white-space: nowrap; overflow: hidden;                                                                                 text-overflow: clip; margin: 0;"
                                                                       t-if="order.quantity" t-esc="'{0:,.0f}'.format(o.limit_number_field(int(order.quantity), 7))">
                                                                    </p>
                                                                </div>
                                                            </td>
                                                            <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: center">
                                                                <div style="width: 40px;">
                                                                    <p style="white-space: nowrap; overflow: hidden;                                                                             text-overflow: clip; margin: 0;"
                                                                       t-if="order.product_uom_id" t-esc="o.limit_charater_field(order.product_uom_id, 2)">
                                                                    </p>
                                                                </div>
                                                            </td>

                                                            <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: right">
                                                                <div style="float: right; width: 91px;">
                                                                    <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;"
                                                                       t-if="order.price_unit and order.price_unit % 1 > 0" t-esc="'{0:,.2f}'.format(o.limit_number_field(order.price_unit, 8, True))">
                                                                    </p>
                                                                    <p style="white-space: nowrap; overflow: hidden; text-overflow: clip; margin: 0;"
                                                                       t-elif="order.price_unit and order.price_unit % 1 == 0" t-esc="'{0:,.0f}'.format(o.limit_number_field(order.price_unit, 8, True))">
                                                                    </p>
                                                                </div>
                                                            </td>
                                                            <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: right">
                                                                <div style="float: right; width: 91px;">
                                                                    <!--Rounding up amount-->
                                                                    <t t-if="o.customer_tax_rounding == 'round'">
                                                                        <t t-set="order_invoice_custom_lineamount"
                                                                           t-value="int(round(order.invoice_custom_lineamount, 2) + 0.5)"/>
                                                                    </t>
                                                                    <t t-elif="o.customer_tax_rounding == 'roundup'">
                                                                        <t t-set="order_invoice_custom_lineamount"
                                                                           t-value="int(round(order.invoice_custom_lineamount, 2) + 0.9)"/>
                                                                    </t>
                                                                    <t t-else="">
                                                                        <t t-set="order_invoice_custom_lineamount"
                                                                           t-value="int(order.invoice_custom_lineamount)"/>
                                                                    </t>
                                                                    <p style="white-space: nowrap; overflow: hidden;                                                                                 text-overflow: clip; margin: 0;"
                                                                       t-if="order.invoice_custom_lineamount" t-esc="'{0:,.0f}'.format(o.limit_number_field(int(order_invoice_custom_lineamount), 8))">
                                                                    </p>
                                                                </div>
                                                            </td>
                                                            <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; border-right: 1px solid #000000; text-align: left">
                                                                <div style="display: inline-block; height: 12px; width: 100%;">
                                                                    <t t-if="order.product_id.product_tax_category == 'exempt'">
                                                                       <span style="white-space: nowrap; width: 82px; overflow: hidden; text-overflow: clip; float: left;">
                                                                           ※非課税
                                                                       </span>
                                                                    </t>
                                                                    <t t-else="">
                                                                        <t t-if="order.tax_rate == 8">
                                                                            <span style="white-space: nowrap; width: 82px; overflow: hidden; text-overflow: clip; float: left;">
                                                                                ※軽減税率
                                                                            </span>
                                                                        </t>
                                                                    </t>
                                                                </div>
                                                                <div style="display: inline-block; height: 14px; width: 82px">
                                                                    <p style="white-space: nowrap; width: 82px; overflow: hidden; text-overflow: clip; margin: 0; float: left; height: 12px;"
                                                                       t-if="order.invoice_custom_Description" t-esc="o.limit_charater_field(order.invoice_custom_Description, 8)">
                                                                    </p>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <t t-set="len_detail" t-value="len_detail + 1"/>
                                                    </t>
                                                </t>
                                            </t>
                                            <t t-set="detail_line_default" t-value="7"/>
                                            <t t-if="len_detail != 7">
                                                <t t-set="line_empty" t-value="detail_line_default - len_detail + 1"></t>
                                                <t t-foreach="range(1, line_empty)" t-as="order">
                                                    <tr>
                                                        <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000;">
                                                            <div style="display: inline-block; width: 384px;">
                                                                <span><null/></span>
                                                                <div style="float: right;">
                                                                    <span><null/></span>
                                                                    <span><null/></span>
                                                                    <span><null/></span> <br/>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: right">
                                                            <span><null/></span>
                                                        </td>
                                                        <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: center">
                                                            <span><null/></span>
                                                        </td>
                                                        <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: right">
                                                            <span><null/></span>
                                                        </td>
                                                        <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: right">
                                                            <span><null/></span>
                                                        </td>
                                                        <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; border-right: 1px solid #000000; text-align: left">
                                                            <div  style="display: inline-block; height: 12px; width: 100%;">
                                                                <span><null/></span>
                                                            </div>
                                                            <div  style="display: inline-block; height: 14px">
                                                                <span><null/></span>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </t>
                                            </t>
                                            <t t-set="len_detail" t-value="0"/>

                                            <t t-if="for_range == 1 and o.x_voucher_tax_transfer == 'voucher'">
                                                <t t-set="total_tax_rate" t-value="subtotal_voucher_tax_amount_10 + subtotal_voucher_tax_amount_8 + subtotal_voucher_tax_amount"/>
                                                <!--Rounding up tax rate-->
                                                <t t-if="o.customer_tax_rounding == 'round'">
                                                    <t t-set="subtotal_voucher_tax_amount_10" t-value="int(round(subtotal_voucher_tax_amount_10, 2) + 0.5)"/>
                                                    <t t-set="subtotal_voucher_tax_amount" t-value="int(round(subtotal_voucher_tax_amount, 2) + 0.5)"/>
                                                    <t t-set="total" t-value="int(round(total, 2) + 0.5)"/>
                                                    <t t-set="total_tax_rate" t-value="int(round(total_tax_rate, 2) + 0.5)"/>
                                                    <t t-set="subtotal_voucher_tax_amount_8" t-value="int(total_tax_rate - subtotal_voucher_tax_amount_10 - subtotal_voucher_tax_amount)"/>
                                                </t>
                                                <t t-elif="o.customer_tax_rounding == 'roundup'">
                                                    <t t-set="subtotal_voucher_tax_amount_10" t-value="int(round(subtotal_voucher_tax_amount_10, 2) + 0.9)"/>
                                                    <t t-set="subtotal_voucher_tax_amount" t-value="int(round(subtotal_voucher_tax_amount, 2) + 0.9)"/>
                                                    <t t-set="total" t-value="int(round(total, 2) + 0.9)"/>
                                                    <t t-set="total_tax_rate" t-value="int(round(total_tax_rate, 2) + 0.9)"/>
                                                    <t t-set="subtotal_voucher_tax_amount_8" t-value="int(total_tax_rate - subtotal_voucher_tax_amount_10 - subtotal_voucher_tax_amount)"/>
                                                </t>
                                                <t t-else="">
                                                    <t t-set="subtotal_voucher_tax_amount_10" t-value="int(subtotal_voucher_tax_amount_10)"/>
                                                    <t t-set="subtotal_voucher_tax_amount" t-value="int(subtotal_voucher_tax_amount)"/>
                                                    <t t-set="total" t-value="int(total)"/>
                                                    <t t-set="total_tax_rate" t-value="int(total_tax_rate)"/>
                                                    <t t-set="subtotal_voucher_tax_amount_8" t-value="int(total_tax_rate - subtotal_voucher_tax_amount_10 - subtotal_voucher_tax_amount)"/>
                                                </t>
                                            </t>

                                            <!--Rounding up total amount and subtotal amount-->
                                            <t t-if="o.customer_tax_rounding == 'round'">
                                                <t t-set="total"
                                                   t-value="int(round(total, 2) + 0.5)"/>
                                                <t t-set="subtotal_amount"
                                                   t-value="int(round(subtotal_amount, 2) + 0.5)"/>
                                                <t t-set="subtotal_amount_8"
                                                   t-value="int(round(subtotal_amount_8, 2) + 0.5)"/>
                                                <t t-set="subtotal_amount_10"
                                                   t-value="int(round(subtotal_amount_10, 2) + 0.5)"/>
                                            </t>
                                            <t t-elif="o.customer_tax_rounding == 'roundup'">
                                                <t t-set="total"
                                                   t-value="int(round(total, 2) + 0.9)"/>
                                                <t t-set="subtotal_amount"
                                                   t-value="int(round(subtotal_amount, 2) + 0.9)"/>
                                                <t t-set="subtotal_amount_8"
                                                   t-value="int(round(subtotal_amount_8, 2) + 0.9)"/>
                                                <t t-set="subtotal_amount_10"
                                                   t-value="int(round(subtotal_amount_10, 2) + 0.9)"/>
                                            </t>
                                            <t t-else="">
                                                <t t-set="total"
                                                   t-value="int(total)"/>
                                                <t t-set="subtotal_amount"
                                                   t-value="int(subtotal_amount)"/>
                                                <t t-set="subtotal_amount_8"
                                                   t-value="int(subtotal_amount_8)"/>
                                                <t t-set="subtotal_amount_10"
                                                   t-value="int(subtotal_amount_10)"/>
                                            </t>

                                            <t t-set="div_sub_total" t-value="'line-height: 1.2 !important; width: 140px; height: 42px;'"/>
                                            <t t-set="div_sub_total_val" t-value="'line-height: 1.2 !important; float: right; height: 42px;'"/>
                                            <t t-set="div_padding_top" t-value="'padding-top: 7%'"/>
                                            <t t-if="subtotal_amount &gt; 0">
                                                <t t-set="div_padding_top" t-value="'padding-top: 0%'"/>
                                            </t>
                                            <!--Row Tax Transfer = (foreign_tax, internal_tax)-->
                                            <t t-if="o.x_voucher_tax_transfer == 'foreign_tax' or o.x_voucher_tax_transfer == 'internal_tax'">
                                                <!--Row 小計-->
                                                <tr>
                                                    <td/>
                                                    <td/>
                                                    <td/>
                                                    <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: center;">
                                                        <div t-att-style="div_sub_total">
                                                            <div t-att-style="div_padding_top">
                                                                <div style="float: left">
                                                                    <div>小　　計</div>
                                                                </div>
                                                                <div style="float: right">
                                                                    <div>（10%対象）</div>
                                                                    <div>（8%対象）</div>
                                                                    <t t-if="subtotal_amount &gt; 0">
                                                                        <div style="height: 14px;"/>
                                                                    </t>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: right;">
                                                        <div t-att-style="div_sub_total_val">
                                                            <div t-att-style="div_padding_top">
                                                                <span style="display: block; width: 108px; overflow: hidden; white-space: nowrap;" t-esc="'{0:,.0f}'.format(o.limit_number_field(int(subtotal_amount_10), 14))"/>
                                                                <span style="display: block; width: 108px; overflow: hidden; white-space: nowrap;" t-esc="'{0:,.0f}'.format(o.limit_number_field(int(subtotal_amount_8), 14))"/>
                                                                <t t-if="subtotal_amount &gt; 0">
                                                                    <span style="display: block; width: 108px; overflow: hidden; white-space: nowrap;" t-esc="'{0:,.0f}'.format(o.limit_number_field(int(subtotal_amount), 14))"/>
                                                                </t>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td style="border-left: 1px solid #000000;"/>
                                                </tr>
                                                <!--Row 消費税-->
                                                <tr>
                                                    <td/>
                                                    <td/>
                                                    <td/>
                                                    <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: center;">
                                                        <div t-att-style="div_sub_total">
                                                            <div t-att-style="div_padding_top">
                                                                <div style="float: left">
                                                                    <div>消 費 税</div>
                                                                </div>
                                                                <div style="float: right">
                                                                    <div>（10%対象）</div>
                                                                    <div>（8%対象）</div>
                                                                    <t t-if="subtotal_tax_amount &gt; 0">
                                                                        <div style="height: 14px;"/>
                                                                    </t>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: right;">
                                                        <div t-att-style="div_sub_total_val">
                                                            <div t-att-style="div_padding_top">
                                                                <span style="display: block; width: 108px; overflow: hidden; white-space: nowrap;" t-esc="'{0:,.0f}'.format(o.limit_number_field(int(subtotal_tax_amount_10), 14))"/>
                                                                <span style="display: block; width: 108px; overflow: hidden; white-space: nowrap;" t-esc="'{0:,.0f}'.format(o.limit_number_field(int(subtotal_tax_amount_8), 14))"/>
                                                                <t t-if="subtotal_tax_amount &gt; 0">
                                                                    <span style="display: block; width: 108px; overflow: hidden; white-space: nowrap;" t-esc="'{0:,.0f}'.format(o.limit_number_field(int(subtotal_tax_amount), 14))"/>
                                                                </t>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td style="border-left: 1px solid #000000;"/>
                                                </tr>
                                                <!--Row 合計-->
                                                <tr>
                                                    <td/>
                                                    <td/>
                                                    <td/>
                                                    <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: center;">
                                                        <div style="width: 140px; height: 14px;">合　　　計</div>
                                                    </td>
                                                    <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: right;">
                                                        <span style="display: block; width: 108px; overflow: hidden; white-space: nowrap;" t-esc="'{0:,.0f}'.format(o.limit_number_field(int(total), 14))"/>
                                                    </td>
                                                    <td style="border-left: 1px solid #000000;"/>
                                                </tr>
                                            </t>
                                            <t t-elif="o.x_voucher_tax_transfer == 'invoice'">
                                            <!--Row Tax Transfer = invoice-->
                                            <!--Row 小計-->
                                                <tr>
                                                    <td/>
                                                    <td/>
                                                    <td/>
                                                    <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: center;">
                                                        <div style="width: 140px; height: 42px;">
                                                            <div style="padding-top: 12%">小　　計</div>
                                                        </div>
                                                    </td>
                                                    <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: right;">
                                                        <div style="float: right; height: 42px;">
                                                            <div style="padding-top: 15%">
                                                                <span style="display: block; width: 108px; overflow: hidden; white-space: nowrap;" t-esc="'{0:,.0f}'.format(o.limit_number_field(int(subtotal_amount + subtotal_amount_10 + subtotal_amount_8), 14))"/>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td style="border-left: 1px solid #000000;"/>
                                                </tr>
                                                <!--Row 消費税-->
                                                <tr>
                                                    <td/>
                                                    <td/>
                                                    <td/>
                                                    <td style="border-left: 1px solid #ffffff; border-bottom: 1px solid #ffffff; text-align: center;">
                                                        <div style="width: 140px; height: 42px">
                                                        </div>
                                                    </td>
                                                    <td/>
                                                    <td/>
                                                </tr>
                                                <!--Row 合計-->
                                                <tr>
                                                    <td/>
                                                    <td/>
                                                    <td/>
                                                    <td style="border-left: 1px solid #ffffff; border-bottom: 1px solid #ffffff; text-align: center;">
                                                        <div style="width: 140px; height: 14px"/>
                                                    </td>
                                                    <td/>
                                                    <td/>
                                                </tr>
                                            </t>
                                            <t t-else="">
                                                <!--Row Tax Transfer = (voucher, custom_tax)-->
                                                <!--Row 小計-->
                                                <tr>
                                                    <td/>
                                                    <td/>
                                                    <td/>
                                                    <!--Row Tax Transfer = voucher-->
                                                    <t t-if="o.x_voucher_tax_transfer == 'voucher'">
                                                        <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: center;">
                                                            <div t-att-style="div_sub_total">
                                                                <div t-att-style="div_padding_top">
                                                                    <div style="float: left">
                                                                        <div>小　　計</div>
                                                                    </div>
                                                                    <div style="float: right">
                                                                        <div>（10%対象）</div>
                                                                        <div>（8%対象）</div>
                                                                        <t t-if="subtotal_amount &gt; 0">
                                                                            <div style="height: 14px;"/>
                                                                        </t>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: right;">
                                                            <div t-att-style="div_sub_total_val">
                                                                <div t-att-style="div_padding_top">
                                                                    <span style="display: block; width: 108px; overflow: hidden; white-space: nowrap;" t-esc="'{0:,.0f}'.format(o.limit_number_field(int(subtotal_amount_10), 14))"/>
                                                                    <span style="display: block; width: 108px; overflow: hidden; white-space: nowrap;" t-esc="'{0:,.0f}'.format(o.limit_number_field(int(subtotal_amount_8), 14))"/>
                                                                    <t t-if="subtotal_amount &gt; 0">
                                                                        <span style="display: block; width: 108px; overflow: hidden; white-space: nowrap;" t-esc="'{0:,.0f}'.format(o.limit_number_field(int(subtotal_amount), 14))"/>
                                                                    </t>
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </t>
                                                    <t t-else="">
                                                        <!--Row Tax Transfer = custom_tax-->
                                                        <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: center;">
                                                            <div style="width: 140px; height: 42px;">
                                                                <div style="padding-top: 12%">小　　計</div>
                                                            </div>
                                                        </td>
                                                        <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: right;">
                                                            <div style="float: right; height: 42px;">
                                                                <div style="padding-top: 15%">
                                                                    <span style="display: block; width: 108px; overflow: hidden; white-space: nowrap;" t-esc="'{0:,.0f}'.format(o.limit_number_field(int(subtotal_amount + subtotal_amount_10 + subtotal_amount_8), 14))"/>
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </t>
                                                    <td style="border-left: 1px solid #000000;"/>
                                                </tr>
                                                <!--Show (消費税, 合計) when it is the last page -->
                                                <t t-if="pager &gt;= (len_invoice_line / 7)">
                                                    <!--Row 消費税-->
                                                    <tr>
                                                        <td/>
                                                        <td/>
                                                        <td/>
                                                        <!--Row Tax Transfer = voucher-->
                                                        <t t-if="o.x_voucher_tax_transfer == 'voucher'">
                                                            <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: center;">
                                                                <div t-att-style="div_sub_total">
                                                                    <div t-att-style="div_padding_top">
                                                                        <div style="float: left">
                                                                            <div>消 費 税</div>
                                                                        </div>
                                                                        <div style="float: right">
                                                                            <div>（10%対象）</div>
                                                                            <div>（8%対象）</div>
                                                                            <t t-if="subtotal_voucher_tax_amount &gt; 0">
                                                                                <div style="height: 14px;"/>
                                                                            </t>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: right;">
                                                                <div t-att-style="div_sub_total_val">
                                                                    <div t-att-style="div_padding_top">
                                                                        <span style="display: block; width: 108px; overflow: hidden; white-space: nowrap;" t-esc="'{0:,.0f}'.format(o.limit_number_field(o.amount_tax_total(10), 14))"/>
                                                                        <span style="display: block; width: 108px; overflow: hidden; white-space: nowrap;" t-esc="'{0:,.0f}'.format(o.limit_number_field(o.amount_tax_total(8), 14))"/>
                                                                        <t t-if="subtotal_voucher_tax_amount &gt; 0">
                                                                            <span style="display: block; width: 108px; overflow: hidden; white-space: nowrap;" t-esc="'{0:,.0f}'.format(o.limit_number_field(o.amount_tax_total(), 14))"/>
                                                                        </t>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                        </t>
                                                        <t t-else="">
                                                            <!--Row Tax Transfer = custom_tax-->
                                                            <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: center;">
                                                                <div style="width: 140px; height: 28px; padding-top: 7%">
                                                                    <div>消 費 税</div>
                                                                </div>
                                                            </td>
                                                            <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: right;">
                                                                <div style="float: right">
                                                                    <span style="display: block; width: 108px; overflow: hidden; white-space: nowrap;" t-esc="'{0:,.0f}'.format(o.limit_number_field(int(o.x_voucher_tax_amount), 14))"/>
                                                                </div>
                                                            </td>
                                                        </t>
                                                        <td style="border-left: 1px solid #000000;"/>
                                                    </tr>
                                                    <!--Row 合計-->
                                                    <tr>
                                                        <td/>
                                                        <td/>
                                                        <td/>
                                                        <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: center;">
                                                            <div style="width: 140px; height: 14px;">合　　　計</div>
                                                        </td>
                                                        <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: right;">
                                                            <t t-if="o.x_voucher_tax_transfer == 'custom_tax'">
                                                                <span style="display: block; width: 108px; overflow: hidden; white-space: nowrap;" t-esc="'{0:,.0f}'.format(o.limit_number_field(int(total + o.x_voucher_tax_amount), 14))"/>
                                                            </t>
                                                            <t t-else="">
                                                                <span style="display: block; width: 108px; overflow: hidden; white-space: nowrap;" t-esc="'{0:,.0f}'.format(o.limit_number_field(int(total), 14))"/>
                                                            </t>
                                                        </td>
                                                        <td style="border-left: 1px solid #000000;"/>
                                                    </tr>
                                                </t>
                                                <t t-else="">
                                                    <!--Hide (消費税, 合計) when it is not the last page -->
                                                    <!--Row 消費税-->
                                                    <tr>
                                                        <td/>
                                                        <td/>
                                                        <td/>
                                                        <td style="border-left: 1px solid #ffffff; border-bottom: 1px solid #ffffff; text-align: center;">
                                                            <div style="width: 140px; height: 42px">
                                                            </div>
                                                        </td>
                                                        <td/>
                                                        <td/>
                                                    </tr>
                                                    <!--Row 合計-->
                                                    <tr>
                                                        <td/>
                                                        <td/>
                                                        <td/>
                                                        <td style="border-left: 1px solid #ffffff; border-bottom: 1px solid #ffffff; text-align: center;">
                                                            <div style="width: 140px; height: 14px"/>
                                                        </td>
                                                        <td/>
                                                        <td/>
                                                    </tr>
                                                </t>
                                            </t>
                                        </tbody>
                                    </table>
                                    <div style="width: 65%;">
                                        <div style="width: 56%; margin-top: -78px; border-bottom: 1px solid;">
                                            <div style="width: 11%; float: left;">適用：</div>
                                            <div style="width: 87%; white-space: nowrap; overflow: hidden; height: 16px;">
                                                <p style="width: 912px; margin: 0;" t-esc="o.x_studio_summary"><null/></p>
                                            </div>
                                        </div>
                                        <div style="width: 43%; display: flex; float: right; margin-top: -31px;">
                                            <span style="border: 1px solid #000000; width: 90px; height: 90px; border-right: none; float: left;"></span>
                                            <span style="border: 1px solid #000000; width: 90px; height: 90px; float: left;"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </t>
                        <t t-set="pager" t-value="pager + 1"/>
                    </div>
                </t>
            </t>
        </template>
    </data>
</odoo>