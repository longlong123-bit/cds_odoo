<?xml version="1.0"?>
<!--Custom report.-->
<odoo>
    <data>
        <template id="invoice_normal_report4">
            <t t-set="line_id" t-value="0"/>
            <t t-set="line_id_1" t-value="line_id"/>
            <t t-set="line_id_2" t-value="line_id"/>
            <t t-set="pager" t-value="1"/>
            <t t-set="len_invoice_line" t-value="len(o.invoice_line_ids)"/>
            <t t-set="subtotal_amount" t-value="0"/>
            <t t-set="subtotal_amount_10" t-value="0"/>
            <t t-set="subtotal_amount_8" t-value="0"/>
            <t t-set="subtotal_tax_amount_10" t-value="0"/>
            <t t-set="subtotal_tax_amount_8" t-value="0"/>
            <t t-set="total" t-value="0"/>
            <t t-set="o" t-value="o.with_context(lang=user.partner_id.lang)"/>
            <t t-foreach="o.invoice_line_ids.sorted(key=lambda r: r.id)" t-as="account_move_line">
                <t t-if="account_move_line.id&gt;line_id_1">
                    <div class="page"
                         style="page-break-before: always; height: 100%; font-size: 12px; line-height: 1 !important; font-family: Lato !important;">
                        <t t-set="line_parent" t-value="o.invoice_line_ids"/>
                        <t t-set="detail_line_default" t-value="7"/>
                        <t t-foreach="range(1, 4)" t-as="for_range">
                            <div style="height: 415px;">
                                <t t-set="o_title" t-value="'売　上　票　（控）'"/>
                                <t t-if="for_range == 2">
                                    <t t-set="o_title" t-value="'納　品　書'"/>
                                </t>
                                <t t-if="for_range == 3">
                                    <t t-set="o_title" t-value="'受　領　書'"/>
                                </t>

                                <!-- Row one：Position 2 and 8 -->
                                <t t-if="for_range == 1">
                                    <div style="display: inline-block; width: 100%;">
                                        <div style="width: 60%; float: left;">
                                            <div style="float: right;">
                                                <h4 class="mt0"
                                                    style="font-size: 18px; color: #000000; border-bottom: 1px solid #000000; margin: 0; padding: 0"
                                                    t-esc="o_title"/>
                                            </div>
                                        </div>
                                        <div style="width: 40%; float: left;">
                                            <div style="margin-left: 59%;">
                                                <span>No.　</span>
                                                <span t-field="o.x_studio_document_no" class="mt0"
                                                      style="font-size: 12px; color: #000000; margin: 0; padding: 0"/>
                                                -
                                                <span t-esc="pager"/>
                                            </div>
                                        </div>
                                    </div>
                                </t>
                                <t t-if="for_range == 2 or for_range == 3">
                                    <div style="border: 1px dashed #000;margin-top: 10px;margin-bottom: 5px;"/>
                                    <div style="display: inline-block; width: 100%;">
                                        <div style="width: 60%; float: left;">
                                            <div style="float: right; margin-right: 9%;">
                                                <h4 class="mt0"
                                                    style="font-size: 18px; color: #000000; border-bottom: 1px solid #000000; margin: 0; padding: 0"
                                                    t-esc="o_title"/>
                                            </div>
                                        </div>
                                        <!-- Position 8 -->
                                        <div style="width: 40%; float: left;">
                                            <div style="margin-left: 59%;">
                                                <span>No.　</span>
                                                <span t-field="o.x_studio_document_no" class="mt0"
                                                      style="font-size: 12px; color: #000000; margin: 0; padding: 0;"/>
                                                -
                                                <span t-esc="pager"/>
                                            </div>
                                        </div>
                                    </div>
                                </t>
                                <!-- Row two -->
                                <div style="display: block">
                                    <!-- Position 1 -->
                                    <div style="float: left;">
                                        <span>お客様コードNo.　</span>
                                        <span t-field="o.partner_id.customer_code"/>
                                    </div>
                                    <!-- Position 9 -->
                                    <div style="margin-right: 150px; float: right;">
                                        <t t-if="o.date">
                                            <span t-esc="o.date.strftime('%Y年%m月%d日')"/>
                                        </t>
                                        <t t-else="">
                                            <span>　年　月　日</span>
                                        </t>
                                    </div>
                                </div>
                                <!-- Row three -->
                                <div style="display: block; height: 20px">
                                    <t t-if="o.partner_id.zip_code">
                                        <span t-field="o.partner_id.zip_code"/>
                                    </t>
                                </div>
                                <!-- Row four -->
                                <div style="display: inline-block; width: 100%; height: 20px;">
                                    <span style="font-weight: 600; font-size: 18px; position: relative; float: right; margin-right: 60px">
                                        株式会社　ト　ラ　ヤ
                                    </span>
                                </div>
                                <!-- Row five -->
                                <div style="display: block; width: 100%; height: 60px;">
                                    <t t-set="name_style"
                                       t-value="'height: 20px; font-size: 16px; white-space: nowrap; overflow: hidden; text-overflow: clip;'"/>
                                    <t t-if="o.partner_id.customer_name_2">
                                        <t t-set="name_style"
                                           t-value="'height: 20px; font-size: 16px; white-space: nowrap; overflow: hidden; text-overflow: clip;'"/>
                                    </t>

                                    <t t-set="name2_style"
                                       t-value="'height: 20px; font-size: 16px; white-space: nowrap; overflow: hidden; text-overflow: clip;'"/>

                                    <div style="width: 45%; position: relative; float: left; text-align: left; border-bottom: 1px solid;">
                                        <!-- Position 4 -->
                                        <span t-field="o.partner_id.street"/>
                                        <br/>
                                        <span t-field="o.partner_id.street2"/>
                                        <br/>
                                        <div style="height: 5px;"/>

                                        <!-- Position 5 -->
                                        <div style="display: block; width: 100%;">
                                            <div style="width: 80%; position: relative; float: left;">
                                                <span t-att-style="name_style" t-field="o.partner_id.name"/>
                                                <br/>
                                                <t t-if="o.partner_id.customer_name_2">
                                                    <span t-att-style="name2_style"
                                                          t-field="o.partner_id.customer_name_2"/>
                                                    <br/>
                                                </t>
                                            </div>
                                            <div style="width: 20%; position: relative; float: right;">
                                                <t t-if="o.partner_id.customer_name_2">
                                                    <div style="height: 19px"/>
                                                </t>
                                                <t t-else="">
                                                    <div style="height: 2px"/>
                                                </t>

                                                <t t-if="o.partner_id.title">
                                                    <span style="float: right; font-size: 15px"
                                                          t-field="o.partner_id.title"/>
                                                </t>
                                                <t t-else="">
                                                    <t t-set="o_greeting" t-value="'　様'"/>
                                                    <t t-if="user.partner_id.lang == 'en_US'">
                                                        <t t-set="o_greeting" t-value="'　Mr.'"/>
                                                    </t>
                                                    <span style="float: right; font-size: 15px" t-esc="o_greeting"/>
                                                </t>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="width: 25%"/>
                                    <!-- Position 10 -->
                                    <div style="width: 30%; position: relative; float: right; text-align: center;">
                                        <span>代表取締役　　遠 藤 孝 二</span>
                                        <br/>
                                        <span>本　社 千葉県銚子市新生町2丁目12番地の5</span>
                                        <br/>
                                        <span>TEL　0479-22-3515　FAX　0479-24-9376</span>
                                        <br/>
                                        <span>神栖営業所　茨 城 県 神 栖 市 溝 口 6 3 2 - 2</span>
                                        <br/>
                                        <span>TEL　0299-97-4416　FAX　0299-90-6530</span>
                                        <br/>
                                    </div>
                                </div>
                                <div style="height: 10px;"/>
                                <!-- Row six -->
                                <div style="display: inline-block; width: 100%; height: 20px;">
                                    <div style="width: 45%; position: relative; float: left; text-align: left; margin-left: 10px;">
                                        <t t-if="pager == 1">
                                            <!-- Position 6 -->
                                            <span style="font-size: 14px; float: left;">合計金額　</span>
                                            <span style="font-size: 14px; border-bottom: 1px solid; float: left;">￥
                                            </span>
                                            <span style="font-size: 14px; overflow: hidden; white-space: nowrap; border-bottom: 1px solid; float: left;"
                                                  t-esc="'{0:,.0f}'.format(int(o.amount_total))"/>

                                            <!-- Position 7 -->
                                            <t t-if="o.x_voucher_tax_transfer == 'invoice'">
                                                <span style="font-size: 14px; float: left;">　（税別）</span>
                                            </t>
                                            <t t-else="">
                                                <span style="ont-size: 14px; float: left;">　（税込）</span>
                                            </t>
                                        </t>
                                    </div>
                                    <div style="width: 25%"/>
                                    <div style="width: 30%; position: relative; float: right; text-align: left;">
                                        <!-- Position 11 -->
                                        <div style="text-align: left; display: inline-block; width: 100%; margin-left: 20px; border-bottom: 1px solid; margin-right: 20px;">
                                            <div style="float: left; font-size: 14px;">
                                                <span>担当：</span>
                                            </div>
                                            <div style="white-space: nowrap; overflow: hidden; float: left; font-size: 14px;">
                                                <t t-esc="o.sales_rep.name"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div style="height: 10px"/>
                                <!-- Row seven - table -->
                                <div style="display: inline-block;">
                                    <table border="0" cellspacing="0" cellpadding="5"
                                           style="width: 100%; line-height: 0.8; font-size: 12px;">
                                        <thead>
                                            <tr>
                                                <td style="border: 1px solid #000000; border-right: 0; text-align: center; width: 50%">
                                                    品　番　　・　　　　品　名
                                                </td>
                                                <td style="border: 1px solid #000000; border-right: 0; text-align: center; width: 11%">
                                                    数　量
                                                </td>
                                                <td style="border: 1px solid #000000; border-right: 0; text-align: center; width: 6%">
                                                    単 位
                                                </td>
                                                <td style="border: 1px solid #000000; border-right: 0; text-align: center; width: 11%">
                                                    単　価
                                                </td>
                                                <td style="border: 1px solid #000000; border-right: 0; text-align: center; width: 11%">
                                                    金　額
                                                </td>
                                                <td style="border: 1px solid #000000; text-align: center; width: 11%">
                                                    備　考
                                                </td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <t t-set="len_detail" t-value="0"/>
                                            <t t-if="for_range == 1">
                                                <t t-set="subtotal_amount" t-value="0"/>
                                                <t t-set="subtotal_amount_10" t-value="0"/>
                                                <t t-set="subtotal_amount_8" t-value="0"/>
                                            </t>
                                            <t t-foreach="o.invoice_line_ids.sorted(key=lambda r: r.id)" t-as="order">
                                                <t t-if="order.id&gt;line_id_2">
                                                    <t t-if="detail_line_default &gt; 0">
                                                        <t t-set="detail_line_default"
                                                           t-value="detail_line_default - 1"/>
                                                        <t t-set="line_id_1" t-value="order.id"/>
                                                        <t t-if="for_range == 3">
                                                            <t t-set="line_id_2" t-value="order.id"/>
                                                        </t>

                                                        <t t-if="for_range == 1">
                                                            <t t-set="total"
                                                               t-value="total + order.invoice_custom_lineamount + order.line_tax_amount"/>
                                                            <t t-if="order.tax_rate == 10">
                                                                <t t-set="subtotal_amount_10"
                                                                   t-value="subtotal_amount_10 + order.invoice_custom_lineamount"/>
                                                                <t t-set="subtotal_tax_amount_10"
                                                                   t-value="subtotal_tax_amount_10 + order.line_tax_amount"/>
                                                            </t>
                                                            <t t-elif="order.tax_rate == 8">
                                                                <t t-set="subtotal_amount_8"
                                                                   t-value="subtotal_amount_8 + order.invoice_custom_lineamount"/>
                                                                <t t-set="subtotal_tax_amount_8"
                                                                   t-value="subtotal_tax_amount_8 + order.line_tax_amount"/>
                                                            </t>
                                                            <t t-else="">
                                                                <t t-set="subtotal_amount"
                                                                   t-value="subtotal_amount + order.invoice_custom_lineamount"/>
                                                            </t>
                                                        </t>
                                                    </t>
                                                </t>
                                                <tr>
                                                    <!-- Position 12: 品　番　・　品　名 -->
                                                    <td style="width: 50%; border-left: 1px solid #000000; border-bottom: 1px solid #000000;">
                                                        <div style="display: inline-block; width: 100%;">
                                                            <div style="position: relative; float: left; width: 50%; white-space: nowrap; overflow: hidden;">
                                                                <span t-field="order.product_name"/>
                                                            </div>
                                                            <div style="position: relative; float: right; width: 50%">
                                                                <div style="float: left; width: 45%; white-space: nowrap; overflow: hidden;">
                                                                    <span t-field="order.product_maker_name"/>
                                                                </div>
                                                                <div style="width: 10%;"/>
                                                                <div style="float: right; width: 45%; white-space: nowrap; overflow: hidden; text-align: right">
                                                                    <span t-field="order.invoice_custom_standardnumber"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </td>

                                                    <!-- Position 13: 数　量 -->
                                                    <td style="width: 11%; border-left: 1px solid #000000; border-bottom: 1px solid #000000;">
                                                        <div style="float: right;">
                                                            <span style="white-space: nowrap; overflow: hidden; text-overflow: clip;"
                                                                  t-esc="'{0:,.0f}'.format(int(order.quantity))">
                                                            </span>
                                                        </div>
                                                    </td>

                                                    <!-- Position 14: 単 位 -->
                                                    <td style="width: 6%; border-left: 1px solid #000000; border-bottom: 1px solid #000000;">
                                                        <div style="float: right;">
                                                            <span style="white-space: nowrap; overflow: hidden; text-overflow: clip;"
                                                                  t-field="order.product_uom_id"/>
                                                        </div>
                                                    </td>

                                                    <!-- Position 15: 単　価 -->
                                                    <td style="width: 11%; border-left: 1px solid #000000; border-bottom: 1px solid #000000;">
                                                        <div style="float: right;">
                                                            <span style="white-space: nowrap; overflow: hidden; text-overflow: clip;"
                                                                  t-esc="'{0:,.0f}'.format(int(order.price_unit))">
                                                            </span>
                                                        </div>
                                                    </td>

                                                    <!-- Position 16: 金　額 -->
                                                    <td style="width: 11%; border-left: 1px solid #000000; border-bottom: 1px solid #000000;">
                                                        <div style="float: right;">
                                                            <span style="white-space: nowrap; overflow: hidden; text-overflow: clip;"
                                                                  t-esc="'{0:,.0f}'.format(int(order.invoice_custom_lineamount))">
                                                            </span>
                                                        </div>
                                                    </td>

                                                    <!-- Position 17: 備　考 -->
                                                    <td style="width: 11%; border-left: 1px solid #000000; border-bottom: 1px solid #000000; border-right: 1px solid #000000; text-align: left">
                                                        <div style="display: inline-block; width: 100%;">
                                                            <t t-if="order.tax_rate == 8">
                                                                <span style="white-space: nowrap; width: 82px; overflow: hidden; text-overflow: clip; float: left;">
                                                                    ※軽減税率
                                                                </span>
                                                            </t>
                                                        </div>
                                                        <div style="display: inline-block; width: 100%">
                                                            <span style="white-space: nowrap; overflow: hidden; text-overflow: clip; float: left;"
                                                                  t-field="order.invoice_custom_Description">
                                                            </span>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <t t-set="len_detail" t-value="len_detail + 1"/>
                                            </t>
                                            <t t-set="detail_line_default" t-value="7"/>
                                            <t t-if="len_detail != 7">
                                                <t t-set="line_empty" t-value="detail_line_default - len_detail + 1"/>
                                                <t t-foreach="range(1, line_empty)" t-as="order">
                                                    <tr>
                                                        <td style="width: 50%; border-left: 1px solid #000000; border-bottom: 1px solid #000000;">
                                                            <div style="display: inline-block;">
                                                                <span>
                                                                    <null/>
                                                                </span>
                                                                <div style="float: right;">
                                                                    <span>
                                                                        <null/>
                                                                    </span>
                                                                    <span>
                                                                        <null/>
                                                                    </span>
                                                                    <span>
                                                                        <null/>
                                                                    </span>
                                                                    <br/>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td style="width: 11%; border-left: 1px solid #000000; border-bottom: 1px solid #000000;">
                                                            <span>
                                                                <null/>
                                                            </span>
                                                        </td>
                                                        <td style="width: 6%; border-left: 1px solid #000000; border-bottom: 1px solid #000000;">
                                                            <span>
                                                                <null/>
                                                            </span>
                                                        </td>
                                                        <td style="width: 11%; border-left: 1px solid #000000; border-bottom: 1px solid #000000;">
                                                            <span>
                                                                <null/>
                                                            </span>
                                                        </td>
                                                        <td style="width: 11%; border-left: 1px solid #000000; border-bottom: 1px solid #000000;">
                                                            <span>
                                                                <null/>
                                                            </span>
                                                        </td>
                                                        <td style="width: 11%; border-left: 1px solid #000000;
                                                    border-bottom: 1px solid #000000; border-right: 1px solid #000000;text-align: left">
                                                            <div style="display: inline-block; width: 100%;">
                                                                <span>
                                                                    <null/>
                                                                </span>
                                                            </div>
                                                            <div style="display: inline-block;">
                                                                <span>
                                                                    <null/>
                                                                </span>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </t>
                                            </t>

                                            <!-- Foreign Tax -->
                                            <tr>
                                                <td/>
                                                <td/>
                                                <td/>
                                                <t t-set="div_sub_total"
                                                   t-value="'line-height: 1 !important; width: 140px; height: 30px;'"/>
                                                <t t-set="div_sub_total_val"
                                                   t-value="'line-height: 1 !important; width: 108px; height: 30px;'"/>
                                                <t t-set="div_padding_top" t-value="'padding-top: 7%'"/>
                                                <t t-if="subtotal_amount &gt; 0">
                                                    <t t-set="div_padding_top" t-value="'padding-top: 0%'"/>
                                                </t>
                                                <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: center; padding: 2px; font-size: 12px;">
                                                    <div t-att-style="div_sub_total">
                                                        <div t-att-style="div_padding_top">
                                                            <div style="float: left">
                                                                <div>小　　計</div>
                                                            </div>
                                                            <div style="float: right">
                                                                <div>（10%対象）</div>
                                                                <div>（8%対象）</div>
                                                                <t t-if="subtotal_amount &gt; 0">
                                                                    <div style="height: 12px;"/>
                                                                </t>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: right; padding: 2px; font-size: 12px;">
                                                    <div t-att-style="div_sub_total_val">
                                                        <div t-att-style="div_padding_top">
                                                            <span style="display: block; width: 108px; overflow: hidden; white-space: nowrap; float: right;"
                                                                  t-esc="'{0:,.0f}'.format(int(subtotal_amount_10))"/>
                                                            <span style="display: block; width: 108px; overflow: hidden; white-space: nowrap; float: right;"
                                                                  t-esc="'{0:,.0f}'.format(int(subtotal_amount_8))"/>
                                                            <t t-if="subtotal_amount &gt; 0">
                                                                <span style="display: block; width: 108px; overflow: hidden; white-space: nowrap; float: right;"
                                                                      t-esc="'{0:,.0f}'.format(int(subtotal_amount))"/>
                                                            </t>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000;"/>
                                            </tr>

                                            <tr>
                                                <td/>
                                                <td/>
                                                <td/>
                                                <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: center; padding: 2px; font-size: 12px;">
                                                    <div style="width: 140px; height: 20px; line-height: 1">
                                                        <div style="float: left;">
                                                            <div>消 費 税</div>
                                                        </div>
                                                        <div style="float: right">
                                                            <div>（10%対象）</div>
                                                            <div>（8%対象）</div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: right; padding: 2px; font-size: 12px;">
                                                    <div style="float: right; line-height: 1">
                                                        <span style="display: block; width: 108px; overflow: hidden; white-space: nowrap;"
                                                              t-esc="'{0:,.0f}'.format(int(subtotal_tax_amount_10))"/>
                                                        <span style="display: block; width: 108px; overflow: hidden; white-space: nowrap;"
                                                              t-esc="'{0:,.0f}'.format(int(subtotal_tax_amount_8))"/>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000;"/>
                                            </tr>
                                            <tr>
                                                <td/>
                                                <td/>
                                                <td/>
                                                <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: center; padding: 2px; font-size: 12px;">
                                                    <div style="width: 140px; height: 8px;">合　　　計</div>
                                                </td>
                                                <td style="border-left: 1px solid #000000; border-bottom: 1px solid #000000; text-align: right; padding: 2px; font-size: 12px;">
                                                    <div style="float: right; line-height: 1">
                                                        <span style="display: block; width: 108px; overflow: hidden; white-space: nowrap;"
                                                              t-esc="'{0:,.0f}'.format(int(total))"/>
                                                    </div>
                                                </td>
                                                <td style="border-left: 1px solid #000000;"/>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <div style="width: 100%; position: relative; bottom: 68px">
                                        <div>
                                            <!-- Position 18 -->
                                            <div style="width: 42%; position: relative; float: left; text-align: left; margin-right: 15px; border-bottom: 1px solid #000000; bottom: -20px">
                                                <div style="width: 11%; position: relative; float: left; text-align: left;">
                                                    <span>適用：</span>
                                                </div>
                                                <div style="width: 89%; position: relative; float: right; text-align: left;">
                                                    <span t-esc="o.x_studio_cus_salesslipforms_table"/>
                                                </div>
                                            </div>
                                            <div style="width: 20%; position: relative; float: left; text-align: left;">
                                                <span style="border: 1px solid #000000; width: 69px; height: 69px; border-right: none; float: left;"/>
                                                <span style="border: 1px solid #000000; width: 69px; height: 69px; float: left;"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </t>
                        <t t-set="pager" t-value="pager + 1"/>
                    </div>
                </t>
            </t>
        </template>
    </data>
</odoo>
