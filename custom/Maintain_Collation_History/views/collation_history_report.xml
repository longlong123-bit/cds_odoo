<!--Custom report.-->
<odoo>
    <data>
        <template id="collation_history_report">
            <t t-call="web.html_container">
                    <t t-set="lang"
                       t-value="docs.partner_id.lang"/>
                    <t t-call="Maintain_Collation_History.collation_history_report_template" t-lang="lang"/>
            </t>
        </template>
        <template id="collation_history_report_template">
            <div class="page" style="page-break-before: always;">
                <t t-set="o" t-value="docs.with_context(lang=lang)"/>

                <!-- LOGO AND TITLE -->
                <div style="text-align: center">
<!--                                        <div style="display: inline-block; width: 25%; text-align: center">西暦 <t-->
<!--                                                t-if="o.x_studio_date_invoiced">-->
<!--                                            <span t-field="o.x_studio_date_invoiced"-->
<!--                                                  t-options="{&quot;format&quot;: &quot;yyyy年MM月dd日&quot;}"/>-->
<!--                                        </t>-->
<!--                                            <span t-else="">　　　年　　月　　日</span></div>-->
                    <div style="display: inline-block; width: 49%; text-align: center; font-size: 28px"><h4
                            style="border-bottom: 2px solid #000; padding: 0 0 5px 0; display: inline">請 求 履 歴 照
                        会</h4></div>
                </div>

                <!-- HEADER OF CONTENT -->
<!--                <div style="margin-top: 30px;">-->
<!--                    &lt;!&ndash; LEFT &ndash;&gt;-->
<!--                    <div style="float: left; font-size: 20px">-->
<!--                        <div style="border-bottom: 1px solid #0100f7; width: 100%;padding: 0 0 5px 0;">Search-->
<!--                            Conditions</div>-->
<!--                    </div>-->

<!--                    &lt;!&ndash; RIGHT &ndash;&gt;-->
<!--                    <div style="float: right; font-size: 18px">-->
<!--                        <div style="text-align: left">売上日付-->
<!--                            <t t-esc="o"/>-->
<!--&lt;!&ndash;                            <span t-field="o.company_id.name"/>&ndash;&gt;-->
<!--                            <span t-field="o.search_x_studio_date_invoiced_from"/> ~ <span-->
<!--                                    t-field="o.search_x_studio_date_invoiced_to"/></div>-->
<!--                        <div style="text-align: left;"><span t-field="o.search_x_studio_document_no"/></div>-->
<!--                        <div style="text-align: left;"><span t-field="o.search_name"/></div>-->
<!--                        <div style="text-align: left;"><span t-field="o.search_invoice_partner_display_name"/></div>-->
<!--                        <div style="text-align: left;"><span t-field="o.search_x_studio_name"/></div>-->
<!--                    </div>-->

<!--                    <div style="clear: both"/>-->
<!--                </div>-->


                <!-- TABLE -->
                <!--                <t t-set="display_discount" t-value="any([l.discount for l in o.invoice_line_ids])"/>-->
                <div class="content-table" style="border: 1px solid #000; margin-top: 15px">
                    <table border="0" cellspacing="0" style="width: 100%; font-size: 15px;">
                        <thead>
                            <tr>
                                <td style="border: 1px solid #000; border-top: 0; border-right: 0; text-align: right; background-color: #e0e0e0; min-width: 100px"
                                    name="th_subtotal">前回締日</td>
                                <td style="border: 1px solid #000; border-top: 0; border-right: 0; text-align: left; background-color: #e0e0e0"
                                    name="th_id"><span>請求No</span></td>
                                <td style="border: 1px solid #000; border-top: 0; border-right: 0; text-align: left; background-color: #e0e0e0"
                                    name="th_description"><span>前回請求金額</span></td>
                                <td style="border: 1px solid #000; border-top: 0; border-right: 0; text-align: right; background-color: #e0e0e0"
                                    name="th_priceunit"><span>入金額</span></td>
                                <td style="border: 1px solid #000; border-top: 0; border-right: 0; text-align: right; background-color: #e0e0e0"
                                    name="th_taxes"><span>繰越金額</span></td>
                                <td style="border: 1px solid #000; border-top: 0; border-right: 0; text-align: right; background-color: #e0e0e0"
                                    name="th_subtotal">御買上金額</td>
                                <td style="border: 1px solid #000; border-top: 0; border-right: 0; text-align: right; background-color: #e0e0e0"
                                    name="th_subtotal">消費税</td>
                                <td style="border: 1px solid #000; border-top: 0; border-right: 0; text-align: right; background-color: #e0e0e0"
                                    name="th_subtotal">今回請求金額</td>
                                <td style="border: 1px solid #000; border-top: 0; border-right: 0; text-align: right; background-color: #e0e0e0"
                                    name="th_subtotal">その他CD</td>
                                <td style="border: 1px solid #000; border-top: 0; border-right: 0; text-align: right; background-color: #e0e0e0"
                                    name="th_subtotal">売伝枚数</td>
                            </tr>
                        </thead>
                        <tbody class="invoice_tbody">
                            <!--                            <t t-set="current_subtotal" t-value="0"/>-->
<!--                            <t t-set="lines"-->
<!--                               t-value="o.invoice_line_ids"/>-->
                            <t t-foreach="docs" t-as="line">
                                <!--                                <t t-set="current_subtotal" t-value="current_subtotal + line.amount_untaxed"/>-->
                                <!--                                <t t-set="current_subtotal" t-value="current_subtotal + line.amount_residual"/>-->
                                <tr>
                                    <td style="border: 1px solid #439eb2; border-right: 0; border-top: 0; text-align: right">
                                        <span><t t-if="line.last_closing_date">
                                            <span t-field="line.last_closing_date"
                                                  t-options="{&quot;format&quot;: &quot;yyyy年MM月dd日&quot;}"/>
                                        </t>
                                            <span t-else="">　　　年　　月　　日</span></span>
                                    </td>
                                    <td style="border: 1px solid #439eb2; border-top: 0; border-right: 0;  text-align: left;">
                                        <span t-field="line.bill_no"/>
                                    </td>
                                    <td style="border: 1px solid #439eb2; border-right: 0; border-top: 0; text-align: left;"
                                        class="text-right">
                                        <span t-field="line.last_billed_amount"/>
                                    </td>
                                    <td style="border: 1px solid #439eb2; border-right: 0; border-top: 0; text-align: right">
                                        <span t-field="line.deposit_amount"/>
                                    </td>
                                    <td style="border: 1px solid #439eb2; border-right: 0; border-top: 0; text-align: right">
                                        <span t-field="line.balance_amount"/>
                                    </td>
                                    <td style="border: 1px solid #439eb2; border-right: 0; border-top: 0; text-align: right">
                                        <span t-field="line.amount_untaxed"/>
                                    </td>
                                    <td style="border: 1px solid #439eb2; border-right: 0; border-top: 0; text-align: right">
                                        <span t-field="line.tax_amount"/>
                                    </td>
                                    <td style="border: 1px solid #439eb2; border-right: 0; border-top: 0; text-align: right">
                                        <span t-field="line.amount_total"/>
                                    </td>
                                    <td style="border: 1px solid #439eb2; border-right: 0; border-top: 0; text-align: right">
                                        <span t-field="line.customer_other_cd"/>
                                    </td>
                                    <td style="border: 1px solid #439eb2; border-right: 0; border-top: 0; text-align: right">
                                        <span t-field="line.invoices_number"/>
                                    </td>
                                </tr>
                            </t>

                            <!--                            <t t-set="empty_lines" t-value="6 - len(lines)"/>-->
                            <!--                            <t t-foreach="empty_lines" t-as="emline">-->
                            <!--                                <tr>-->
                            <!--                                    <td style="border: 1px solid #000; border-top: 0; border-right: 0; border-left: 0; border-bottom-style: dashed; text-align: left; padding: 5px">-->
                            <!--                                        <div style="height: 35px"/>-->
                            <!--                                    </td>-->
                            <!--                                    <td style="border: 1px solid #000; border-top: 0; border-right: 0; border-bottom-style: dashed; text-align: right; padding: 5px"></td>-->
                            <!--                                    <td style="border: 1px solid #000; border-top: 0; border-right: 0; border-bottom-style: dashed; text-align: left; padding: 5px"></td>-->
                            <!--                                    <td style="border: 1px solid #000; border-top: 0; border-right: 0; border-bottom-style: dashed; text-align: right; padding: 5px"></td>-->
                            <!--                                    <td style="border: 1px solid #000; border-top: 0; border-right: 0; border-bottom-style: dashed; text-align: right; padding: 5px"></td>-->
                            <!--                                    <td style="border: 1px solid #000; border-top: 0; border-right: 0; border-bottom-style: dashed; text-align: right; padding: 5px"></td>-->
                            <!--                                </tr>-->
                            <!--                            </t>-->

                            <!--                            <tr>-->
                            <!--                                <td style="border: 1px solid #000; border-top: 0; border-right: 0; border-left: 0; border-bottom-style: dashed; padding: 5px; text-align: center">-->
                            <!--                                    小　計</td>-->
                            <!--                                <td style="border: 1px solid #000; border-top: 0; border-right: 0; border-bottom-style: dashed; padding: 5px"><div-->
                            <!--                                        style="height: 35px"/></td>-->
                            <!--                                <td style="border: 1px solid #000; border-top: 0; border-right: 0; border-bottom-style: dashed"></td>-->
                            <!--                                <td style="border: 1px solid #000; border-top: 0; border-right: 0; border-bottom-style: dashed"></td>-->
                            <!--                                <td style="border: 1px solid #000; border-top: 0; border-right: 0; border-bottom-style: dashed; text-align: right; padding: 5px"><span-->
                            <!--                                        t-field="o.amount_untaxed"/></td>-->
                            <!--                                <td style="border: 1px solid #000; border-top: 0; border-right: 0; border-bottom-style: dashed"></td>-->
                            <!--                            </tr>-->

                            <!--                            <tr>-->
                            <!--                                <td style="border: 0; padding: 5px; text-align: center">消費税</td>-->
                            <!--                                <td style="border: 1px solid #000; border-top: 0; border-right: 0; border-bottom: 0; padding: 5px"><div-->
                            <!--                                        style="height: 35px"/></td>-->
                            <!--                                <td style="border: 1px solid #000; border-top: 0; border-right: 0; border-bottom: 0"></td>-->
                            <!--                                <td style="border: 1px solid #000; border-top: 0; border-right: 0; border-bottom: 0"></td>-->
                            <!--                                <td style="border: 1px solid #000; border-top: 0; border-right: 0; border-bottom: 0; text-align: right; padding: 5px">-->
                            <!--                                    <t t-foreach="o.amount_by_group" t-as="tax">-->
                            <!--                                        <div><span t-esc="tax[3]"/></div>-->
                            <!--                                    </t>-->
                            <!--                                </td>-->
                            <!--                                <td style="border: 1px solid #000; border-top: 0; border-right: 0; border-bottom: 0"></td>-->
                            <!--                            </tr>-->
                        </tbody>
                    </table>
                </div>
            </div>
        </template>
    </data>
</odoo>