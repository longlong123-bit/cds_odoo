<?xml version='1.0' encoding='UTF-8'?>
<odoo>
  <record model="ir.ui.view" id="view_move_line_tree_custom">
      <field name="name">invoice.line.custom.tree</field>
      <field name="model">account.move.line</field>
      <field name="inherit_id" ref="account.view_move_line_tree_grouped_general"></field>
<!--      <field name="domain">[('exclude_from_invoice_tab', '=', 'False')]</field>-->
      <field name="arch" type="xml">
<!--          <xpath expr="//field[@name='date']" position="after">-->
          <xpath expr="//tree" position="replace">
              <tree>
<!--                  <field name="move_id" optional="show" readonly="1"/>-->
                  <field name="date" optional="show" readonly="1"/>
                  <field name="invoice_no" optional="show" readonly="1"/>
                  <field name="x_invoicelinetype" optional="show" readonly="1"/>
                  <field name="x_customer_show_in_tree" optional="show" readonly="1"/>
                  <field name="x_product_barcode" optional="show" readonly="1"/>
<!--                  <field name="x_product_code_show_in_tree" optional="show" readonly="1"/>-->
                  <field name="invoice_custom_standardnumber" optional="show" readonly="1"/>
                  <field name="invoice_custom_FreightCategory" optional="show" readonly="1"/>
                  <field name="x_product_name" optional="show" readonly="1"/>
                  <field name="quantity" optional="show" readonly="1"/>
                  <field name="product_uom_id" optional="show" readonly="1"/>
                  <field name="price_unit" optional="show" readonly="1"/>
                  <field name="invoice_custom_lineamount" optional="show" readonly="1"/>
                  <field name="tax_ids" widget="many2many_tags"
                                               domain="[('type_tax_use', '=?', parent.invoice_filter_type_domain), ('company_id', '=', parent.company_id)]"
                                               context="{'append_type_to_tax_name': not parent.invoice_filter_type_domain}"
                                               options="{'no_create': True}"
                                               optional="show" readonly="1"/>
                  <field name="x_tax_transfer_show_tree" optional="show" readonly="1"/>
              </tree>
            </xpath>
      </field>
  </record>

  <record model="ir.ui.view" id="invoice_custom_tree">
      <field name="name">invoice.custom.form</field>
      <field name="model">account.move</field>
      <field name="inherit_id" ref="account.view_invoice_tree"/>
      <field name="arch" type="xml">
            <xpath expr="//tree" position="replace">
                <tree class="forward_edit">
                    <button class="o_button_line" string="" icon="fa-toggle-right" name="get_lines"/>
                    <field name="x_studio_date_invoiced" string="Date Invoiced"/>
                    <field name="x_studio_document_no" string="Document No"/>
                    <field name="ref" string="Order Reference"/>
                    <field name="x_customer_code_for_search" string="Customer"/>
                    <field name="x_studio_name" string="Customer Name"/>
                    <field name="customer_trans_classification_code" string="Transaction Class"/>
                    <field name="customer_group" string="Customer Group"/>
                    <field name="customer_state" string="Customer State"/>
                    <field name="customer_industry" string="Customer Industry"/>
<!--                    <field name="customer_closing_date" string="Closing Date"/>-->
                    <field name="x_userinput_id" string="userinput_id"/>
                    <field name="sales_rep" string="Sales Rep"/>
                    <field name="state" string="Document Status"/>
                    <field name="amount_untaxed" string="Total Lines" sum="Total" optional="show"/>
                    <field name="x_voucher_tax_amount" string="Voucher Tax Amount" sum="Total" optional="show"/>
                    <field name="amount_total" string="Grand Total" sum="Amount Due" optional="show"/>
                </tree>
            </xpath>
      </field>
  </record>

  <!--        search-->
  <record model="ir.ui.view" id="invoice_custom_search">
      <field name="name">invoice.custom.search</field>
      <field name="model">account.move</field>
      <field name="inherit_id" ref="account.view_account_invoice_filter"/>
      <field name="arch" type="xml">
          <xpath expr="//field[@name='name']" position="before">
            <field name="x_studio_document_no" string="Document No"/>
            <field name="ref" string="Order Reference"/>
            <field name="x_studio_date_invoiced" string="Date Invoiced"/>
            <field name="x_customer_code_for_search" string="Customer"/>
              <field name="x_studio_name" string="Customer Name"/>
            <field name="x_userinput_id" string="userinput_id"/>
              <field name="sales_rep" string="Sales Rep"/>
            <field name="create_date" string="Updated"/>
            <field name="state" string="Document Status"/>
            <field name="customer_trans_classification_code" string="Transaction Class"/>
          </xpath>
      </field>
  </record>


<record id="view_move_custom_form" model="ir.ui.view">
    <field name="name">account.move.custom.form</field>
    <field name="model">account.move</field>
    <field name="mode">primary</field>
    <field name="inherit_id" ref="account.view_move_form"/>
    <field name="priority">1</field>
    <field name="arch" type="xml">
        <xpath expr="//field[@name='name']" position="attributes">
            <attribute name="invisible">1</attribute>
        </xpath>
        <xpath expr="//sheet/field[@name='invoice_sequence_number_next_prefix']" position="attributes">
            <attribute name="invisible">1</attribute>
        </xpath>
        <xpath expr="//sheet/field[@name='invoice_sequence_number_next']" position="attributes">
            <attribute name="invisible">1</attribute>
        </xpath >
        <xpath expr="//form/header/button[@name='action_invoice_register_payment']"  position="attributes">
            <attribute name="attrs">{'invisible': [('customer_trans_classification_code','!=','cash')]}</attribute>
        </xpath>
        <xpath expr="//form/header/button[@name='action_reverse']"  position="attributes">
            <attribute name="invisible">1</attribute>
        </xpath>

        <xpath expr="//form/header/button[@name='action_reverse']"  position="after">
          <field name="trigger_quotation_history"  widget="Maintain_Quotation_History.Order" z-index="92" attrs="{'invisible':[('state','in',['posted'])]}"/>
          <field name="x_history_voucher" widget="Maintain_Sale_History.Voucher" z-index="92" attrs="{'invisible':[('state','in',['posted'])]}"/>
        </xpath>

<!--        <xpath expr="//header" position="inside">-->
<!--            <button name="fill_data" string="Fill data" class="o_fill_data"/>-->
<!--        </xpath>-->

      <!-- BEGIN FORM -->
      <xpath expr="//group[1]" position="replace">
          <div style="text-align: right; font-weight: bold; font-size: 1.2rem; margin-bottom: 20px; margin-right: 80px;">
            <field name="x_studio_line_info" readonly="1" class="no-border"/>
          </div>
        <table style ="vertical-align: baseline;" class="custom-form-table">
          <tbody>
            <!-- Row 1 -->
              <tr>
                  <td class="col-label"><label for="x_studio_document_no" string="Document No"/></td>
                  <td class="col-field">
                      <field style="width:90px!important;float:left!important;" name="x_studio_document_no" string="Document No" readonly="1" class="o_input"/>
                  </td>
              </tr>
            <tr>
              <td class="col-label"><label for="x_studio_date_invoiced" string="Invoice Date*"/></td>
              <td class="col-field"><field name="x_studio_date_invoiced" string="Invoice Date*" required="1" z-index="94" attrs="{'readonly':[('state','in',['posted'])]}"/></td>

              <td class="col-label"><label for="x_studio_date_shipment" string="shipmentdate*"/></td>
              <td class="col-field"><field name="x_studio_date_shipment" string="shipmentdate*" required="1" z-index="95" attrs="{'readonly':[('state','in',['posted'])]}"/></td>

              <td class="col-label"><label for="x_userinput_id" string="userinput_id"/></td>
              <td class="col-field"><field name="x_userinput_id" string="userinput_id" z-index="91" attrs="{'readonly':[('state','in',['posted'])]}" class="o_input"/></td>

              <td class="col-label"><label for="customer_trans_classification_code" string="Transaction Class*"/></td>
              <td class="col-field">
                  <field name="customer_trans_classification_code" string="Transaction Class*" required="1" attrs="{'readonly':[('state','in',['posted'])]}"/>
              </td>
            </tr>
            <tr>
              <td class="col-label"><label for="x_studio_business_partner" string="Customer*"/></td>
              <td class="col-field">
                <field name="x_studio_business_partner" required="1" domain="[('customer_rank','>', 0)]" default_focus="1"
                       context="{'showemail': 'ok','res_partner_search_mode': 'customer'}"
                       attrs="{'readonly':[('state','in',['posted'])]}" z-index="98"/>
              </td>
              <td colspan="2"><field name="x_studio_name" string="Name" class="o_address_street" style="width : 100%;"
                   placeholder="Name..." force_save="1"  widget="input" z-index="99" attrs="{'readonly':[('state','in',['posted'])]}"/></td>

              <td class="col-label"><label for="ref" string="Order Reference"/></td>
              <td class="col-field"><field name="ref" string="Order Reference" z-index="92" attrs="{'readonly':[('state','in',['posted'])]}" class="o_input"/></td>

                <td class="col-label"><label for="x_studio_payment_rule_1" string="Payment Rule"/></td>
                <td class="col-field"><field name="x_studio_payment_rule_1" string="Payment Rule" attrs="{'readonly':[('state','in',['posted'])]}" z-index="97"/></td>

              <td class="col-label"><label for="x_studio_price_list" string="Price List*" invisible="1"/></td>
              <td class="col-field"><field name="x_studio_price_list" string="Price List*" attrs="{'readonly':[('state','in',['posted'])]}" force_save="1" invisible="1" z-index="93"/></td>

            </tr>
            <tr>
                <td></td>
                <td class="col-label"><label for="x_bussiness_partner_name_2" string="名称2"/></td>
                <td colspan="2" class="col-field"><field name="x_bussiness_partner_name_2" string="名称2" attrs="{'readonly':[('state','in',['posted'])]}" force_save="1"  z-index="93"/></td>
                <td class="col-label"><label for="sales_rep" string="Sales Rep"/></td>
                <td class="col-field"><field name="sales_rep" string="Sales Rep" z-index="96" attrs="{'readonly':[('state','in',['posted'])]}" class="o_input"/></td>

                <td class="col-label"><label for="invoice_payment_terms_custom" string="Payment Term"
                                           attrs=" {'invisible': [ ('x_studio_payment_rule_1','in',['rule_cash','rule_check','rule_credit', False])]} "/></td>
              <td class="col-field">
                  <field name="invoice_payment_terms_custom" class="o_input" force_save="1"
                         attrs=" {'invisible': [ ('x_studio_payment_rule_1','in',['rule_cash','rule_check','rule_credit', False])]} "/>
              </td>
            </tr>
            <tr>
              <td class="col-label"><label for="x_studio_address_1" string="Address"/></td>
              <td colspan="3" class="col-field"><field name="x_studio_address_1" string="Address 1" class="o_address_city"
                   placeholder="Address 1..." force_save="1" widget="input" z-index="101" attrs="{'readonly':[('state','in',['posted'])]}"/></td>
              <td></td>
              <td></td>

              <td class="col-label"><label for="x_studio_date_printed" string="Date Printed"/></td>
              <td class="col-field"><field autocomplete="off" name="x_studio_date_printed" string="Date Printed" z-index="100" attrs="{'readonly':[('state','in',['posted'])]}" class="o_input"/></td>
            </tr>
            <tr>
              <td></td>
              <td colspan="3" class="col-field"><field name="x_studio_address_2" string="Address 2" class="o_address_city"
                                                       placeholder="Address 2..." force_save="1"  widget="input" z-index="102" attrs="{'readonly':[('state','in',['posted'])]}"/></td>
              <td colspan="2" class="col-field"><field name="x_studio_address_3" string="Address 3" class="o_address_city" placeholder="Address 3..." force_save="1"  widget="input" z-index="103" attrs="{'readonly':[('state','in',['posted'])]}"/></td>

             <td class="col-label"><label for="x_voucher_tax_transfer" string="Tax Transfer*"/></td>
              <td class="col-field"><field name="x_voucher_tax_transfer" string="Tax Transfer*" z-index="107" attrs="{'readonly':[('state','in',['posted'])]}" required="True"/></td>
            </tr>
            <tr>
              <!-- Column 1 -->
              <td class="col-label"><label for="x_studio_cus_salesslipforms_table" string="cus_salesslipforms_Table"/></td>
              <td class="col-field"><field name="x_studio_cus_salesslipforms_table" string="cus_salesslipforms_Table" z-index="105" attrs="{'readonly':[('state','in',['posted'])]}"/></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
                <td class="col-label"><label for="x_voucher_deadline" string="締切"/></td>
              <td class="col-field"><field name="x_voucher_deadline" string="締切" z-index="107" attrs="{'readonly':[('state','in',['posted'])]}"/></td>
              <td class="col-field"><field name="customer_tax_rounding" string="消費税端数処理" z-index="107" invisible="True"/></td>
            </tr>
            <tr>
              <!-- Column 1 -->
              <td class="col-label"><label for="x_studio_description" string="Description"/></td>
              <td colspan="5" class="col-field"><field name="x_studio_description" string="Description" z-index="107" attrs="{'readonly':[('state','in',['posted'])]}"/></td>
                <td class="col-label"><label for="customer_closing_date" string="Closing Date" /></td>
                <td class="col-field"><field name="customer_closing_date" string="Closing Date" readonly="1" force_save="1"/></td>
              <!-- Column 2 -->
              <td></td>
              <!--<td class="col-checkbox"><field name="x_studio_price_includes_tax" string="Price includes Tax"/><label for="x_studio_price_includes_tax" string="Price includes Tax"/></td>-->
            </tr>
            <tr>
              <!-- Column 1 -->
              <td class="col-label"><label for="amount_untaxed" string="Total Lines*"/></td>
              <td class="col-field"><field name="amount_untaxed" widget="float" string="Total Lines*" required="1" readonly="1" class="o_input" style="text-align:right; justify-content: flex-end;"/></td>

              <!-- Column 2 -->
              <td class="col-label"><label for="x_voucher_tax_amount" string="Voucher Tax Amount*"/></td>
              <td class="col-field"><field name="x_voucher_tax_amount" string="Voucher Tax Amount*" required="1" readonly="1" class="o_input" style="text-align:right; justify-content: flex-end;"/></td>

              <!-- Column 3 -->
              <td class="col-label"><label for="amount_total" string="Grand Total*"/></td>
              <td class="col-field"><field name="amount_total" string="Grand Total*" required="1" readonly="1" class="o_input" style="text-align:right; justify-content: flex-end;"/></td>
                <!-- Column 4-->

                <field name="customer_office" string="Customer Office" invisible="1"/>
<!--              <td class="col-label"><label for="customer_from_date" string="customer_from_date" /></td>-->
                <field name="customer_from_date" force_save="1" invisible="1"/>
            </tr>

            <!-- Row 10 -->
            <tr>
              <!-- Column 1 -->
              <td class="col-label"><label for="state" string="Document Status*"/></td>
              <td class="col-field"><field name="state" string="Document Status*" readonly="1" required="1" class="o_input"/></td>

              <!-- Column 2 -->
                <field name="customer_group" string="Customer Group" invisible="1"/>
                <field name="customer_state" string="Customer State" invisible="1"/>
                <field name="customer_industry" string="Customer Industry" invisible="1"/>
                <field name="customer_trans_classification_code" string="Transaction classification" invisible="1"  force_save="1"/>
<!--                <field name="customer_closing_date" string="Closing Date" invisible="1"/>-->
              <td></td>
              <td class="col-field"></td>
                <td class="col-label"><label for="closing_date_compute" string="Closing Date Compute" invisible="1"/></td>
                <td class="col-field"><field name="closing_date_compute" string="Closing Date Compute" invisible="1"/></td>
            </tr>
          </tbody>
        </table>

        <!--<field name="currency_id"
                     groups="base.group_multi_currency"
                     attrs="{'invisible': [('type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund'))]}"/>
        <field name="journal_id"
           invisible="context.get('default_journal_id') and context.get('type', 'entry') != 'entry'"
           groups="account.group_account_user"
           options="{'no_create': True}"
           domain="[('type', '=?', invoice_filter_type_domain)]"
           attrs="{'readonly': [('name', '!=', '/')]}"/>-->
		<field name="currency_id" groups="base.group_multi_currency" invisible="1"/>
        <field name="journal_id" invisible="1"/>
        <field name="partner_id" invisible="1"/>
          <field name="line_len" invisible="1"/>
      </xpath>
      <!-- END FORM -->
      <xpath expr="//field[@name='invoice_line_ids']" poisition="attributes">
		<attribute name="context">{'default_line_ids': line_ids, 'default_move_id': id,'journal_id': journal_id, 'default_partner_id': commercial_partner_id, 'default_currency_id': currency_id != company_currency_id and currency_id or False}</attribute>
	  </xpath>

      <xpath expr = "//field[@name='invoice_line_ids']/tree" position = "replace" >
            <tree editable="bottom" class="invoice_create" string="Journal Items" default_order="invoice_custom_line_no" widget="section_and_note_one2many" context="{'show_address': 1}">
<!--                <control>-->
<!--                    <create name="add_line_control" string="Add a line"/>-->
<!--                </control>-->
                <!-- Displayed fields -->
                <field name="sequence" widget="handle"/>
                <button name="button_update" type="object"
                  style="background : url('/web/static/src/img/form-toolbar/EditRecord16.png') no-repeat center;background-size:contain;background-color: transparent; display: inline-block; margin-left: 1px; margin-right: 1px; width: 16px; height: 16px; padding: 1px;border: none;" >
                </button>
                <field name="x_history_detail" style="display:none" domain="[('exclude_from_invoice_tab', '=', False)]" position="attributes"  widget="Maintain_Sale_History.Detail" context="{'tree_view_ref':'account.view_move_line_tree_grouped_general'}"/>
		        <field name="invoice_custom_line_no" required="True"/>
                <field name="x_invoicelinetype" required="True" string="内訳区分"/>
<!--                <field name="x_crm_purchased_products" context="{'show_address': 1}" string="Product">-->
<!--                    <tree string="Most purchased products">-->
<!--                                <field name="id" />-->
<!--                                <field name="name"/>-->
<!--                                <field name="barcode"/>-->
<!--                    </tree>-->
<!--                </field>-->
                <field name="product_id" string="Product Code"  widget="product_many2one" context="{'show_product_code': 1}" attrs="{'required': [('parent.type', 'not in', ('in_invoice', 'in_refund','in_receipt'))]}"  domain="['|', ('company_id', '=', False), ('company_id', '=', parent.company_id)]"/>
<!--                <field name="x_crm_purchased_products" string="Product" attrs="{'required': [('parent.type', 'not in', ('in_invoice', 'in_refund','in_receipt'))]}"  domain="['|', ('company_id', '=', False), ('company_id', '=', parent.company_id)]"/>-->
<!--                <field name="x_product_modelnumber"/>-->
                <field name="x_product_barcode" string="JAN/UPC/EAN"/>
                <field name="x_product_name" string="商品名"/>
                <field name="x_product_name2" string="商品名2"/>

                <field name="invoice_custom_standardnumber"/>
                <field name="invoice_custom_FreightCategory" string="Maker Code" options="{'no_quick_create':True,'no_create_edit':True , 'no_open': True}"/>
                <field name="quantity" string="Quantity"/>
                <field name="price_unit" string="Price"/>
                <field name="product_uom_id" readonly="1" widget="selection" options="{'no_quick_create':True,'no_create_edit':True , 'no_open': True}" string="UoM" required="True"/>
                <field name="invoice_custom_lineamount"/>
<!--                <field name="line_tax_amount" string="Tax Amount" attrs="{'readonly': [('parent.x_voucher_tax_transfer', '!=', 'custom_tax')]}"/>-->
                <field name="tax_ids" string="Taxes"
                       widget="many2many_tags" readonly="False" invisible="True"
                       domain="[('type_tax_use', '=?', parent.invoice_filter_type_domain), ('company_id', '=', parent.company_id)]"
                       context="{'append_type_to_tax_name': not parent.invoice_filter_type_domain}"
                       options="{'no_quick_create':True,'no_create_edit':True , 'no_open': True}"/>
                <field name="tax_rate" string="Tax Rate" attrs="{'readonly': [('parent.x_voucher_tax_transfer', '!=', 'custom_tax')]}"/>
                <field name="line_tax_amount" string="Tax Amount" attrs="{'readonly': [('parent.x_voucher_tax_transfer', '!=', 'custom_tax')]}"/>
<!--                       attrs="{'readonly': [('parent.x_voucher_tax_transfer', '!=', 'custom_tax')]}"/>-->
                <field name="invoice_custom_uom_cost_value"/>

<!--                <field name="invoice_custom_discountunitprice"/>-->
<!--                <field name="discount" string="Discount(%)"/>-->

<!--                <field name="invoice_custom_salesunitprice"/>-->
                <field name="invoice_custom_Description"/>
<!--                <field name="tax_ids" string="Taxes"-->
<!--                       widget="many2many_tags"-->
<!--                       domain="[('type_tax_use', '=?', parent.invoice_filter_type_domain), ('company_id', '=', parent.company_id)]"-->
<!--                       context="{'append_type_to_tax_name': not parent.invoice_filter_type_domain}"-->
<!--                       options="{'no_quick_create':True,'no_create_edit':True , 'no_open': True}"-->
<!--                       attrs="{'readonly': [('parent.x_voucher_tax_transfer', '!=', 'custom_tax')]}"/>-->


                <field name="move_name" invisible="1"/>
                <field name="account_id" invisible="1" groups="account.group_account_user" domain="[('deprecated', '=', False), ('user_type_id.type', 'not in', ('receivable', 'payable')), ('company_id', '=', parent.company_id)]" attrs="{'required': [('display_type', '=', False)]}"/>
                <field name="analytic_account_id" invisible="1" domain="['|', ('company_id', '=', False), ('company_id', '=', parent.company_id)]" groups="analytic.group_analytic_accounting" optional="show"/>
                <field name="analytic_tag_ids" invisible="1" domain="['|', ('company_id', '=', False), ('company_id', '=', parent.company_id)]" groups="analytic.group_analytic_tags" optional="show" widget="many2many_tags"/>

                <!-- Others fields -->
                <field name="partner_id" invisible="1"/>
                <field name="amount_currency" invisible="1"/>
                <field name="currency_id" invisible="1"/>
                <field name="debit" invisible="1"/>
                <field name="credit" invisible="1"/>
                <field name="date" invisible="1"/>
                <field name="date_maturity" invisible="1"/>

                <field name="tax_line_id" invisible="1"/>
                <field name="tax_repartition_line_id" invisible="1"/>
                <field name="tag_ids" invisible="1"/>
                <field name="tax_base_amount" invisible="1"/>
                <field name="tax_exigible" invisible="1"/>
                <field name="company_id" invisible="1"/>
                <field name="company_currency_id" invisible="1"/>
                <field name="recompute_tax_line" invisible="1" force_save="1"/>
                <field name="display_type" force_save="1" invisible="1"/>
                <field name="is_rounding_line" invisible="1"/>
                <field name="exclude_from_invoice_tab" invisible="1"/>
                <field name="account_internal_type" invisible="1"/>
                <field name="always_set_currency_id" invisible="1"/>
            </tree>
        </xpath>
      <xpath expr = "//field[@name='line_ids']/tree/field[@name='account_id']" position = "before" >
	      <field name="invoice_custom_line_no"/>
		  <field name="x_invoicelinetype"/>
		  <field name="x_product_barcode"/>
                <field name="x_product_name"/>
                <field name="x_product_name2"/>

                <field name="invoice_custom_standardnumber"/>
                <field name="invoice_custom_FreightCategory" options="{'no_quick_create':True,'no_create_edit':True , 'no_open': True}"/>
                <field name="line_tax_amount"/>
                <field name="quantity" string="Quantity"/>
                <field name="price_unit" string="Price"/>
                <field name="product_uom_id" readonly="1" widget="selection" options="{'no_quick_create':True,'no_create_edit':True , 'no_open': True}" string="UoM" required="True"/>
                <field name="invoice_custom_lineamount"/>
                <field name="invoice_custom_uom_cost_value"/>
                <field name="x_history_detail" domain="[('exclude_from_invoice_tab', '=', False)]" invisible="1" position="attributes"  widget="Maintain_Sale_History.Detail" context="{'tree_view_ref':'account.view_move_line_tree_grouped_general'}"/>
		  <field name="invoice_custom_Description"/>
        </xpath>
        <xpath expr="//field[@name='line_ids']" poisition="attributes">
		    <attribute name="context">{'default_line_ids': line_ids, 'default_move_id': id,'line_ids': line_ids, 'journal_id': journal_id, 'default_partner_id': commercial_partner_id, 'default_currency_id': currency_id != company_currency_id and currency_id or False}</attribute>
	    </xpath>

        <xpath expr = "//field[@name='line_ids']/tree/field[@name='discount']" position = "attributes" >
          <attribute name="invisible">0</attribute>
        </xpath>
        <xpath expr = "//page[@id='aml_tab']" position = "after" >
          <page id="invoice_tax" string="Invoice Tax" name="invoice_tax" >
              <field name="invoice_line_ids_tax" class="custom_template">
                  <tree editable="bottom" create="false" delete="false" string="Journal Items1">
                      <button name="button_update" type="object" class="oe_edit_only"
                              style="background : url('/web/static/src/img/form-toolbar/EditRecord16.png')
                              no-repeat center;
                              background-size: contain;
                              background-color: transparent;
                              display: inline-block;
                              margin-left: 1px;
                              margin-right: 1px;
                              width: 16px;
                              height: 16px;
                              padding: 1px;
                              border: none;"/>
                      <field name="move_name" readonly="True"/>
                      <field name="taxGroup" readonly="True"/>
                      <field name="tax_base_amount" readonly="True"/>
                      <field name="tax_amount" readonly="True"/>
                      <field name="price_include_tax" invisible="1" readonly="True"/>
                      <field name="tax_provider" readonly="True"/>
                  </tree>
                </field>
          </page>
        </xpath>
        <xpath expr = "//page[@id='other_tab']" position = "attributes" >
          <attribute name="invisible">1</attribute>
        </xpath>
        <xpath expr = "//group[@class='oe_subtotal_footer']" position = "attributes" >
          <attribute name="invisible">1</attribute>
        </xpath>
    </field>
  </record>

    <!--  Invoice Tax Tree  -->
    <record id="account_tax_line_form" model="ir.ui.view">
        <field name="name">account.tax.line.form</field>
        <field name="model">account.tax.line</field>
        <field name="mode">primary</field>
        <field name="priority" eval="7"/>
        <field name="arch" type="xml">
            <form string="Invoice Tax" class="invoice_tax_custom custom_template">
                <group>
                    <group style="width: 33%;">
                        <field name="client" readonly="True" string="Client*"/>
                        <field name="move_name" readonly="True" string="Invoice*"/>
                    </group>
                    <group style="width: 33%;">
                        <field name="organization" readonly="True" string="Organization*"/>
                    </group>
                    <group style="width: 33%;">
                    </group>

                    <group style="width: 33%;">
                        <field name="taxGroup" readonly="True" string="Tax*"/>
                        <field name="tax_base_amount" readonly="True" string="Tax base Amount*"/>
                    </group>
                    <group style="width: 33%;">
                        <label for="price_include_tax" invisible="True"/>
                        <div>
                            <field name="price_include_tax" widget="boolean_tags" readonly="True"/>
                            <label for="price_include_tax"/>
                        </div>

                        <field name="tax_amount" readonly="True" string="Tax Amount*"/>
                    </group>
                    <group style="width: 33%;">
                        <field name="tax_provider" readonly="True"/>
                    </group>
                </group>
                <footer>
                    <button data-dismiss="modal" string="Close"/>
                </footer>
            </form>
        </field>
    </record>

    <!--  Invoice Lines Tree  -->
    <record id="view_move_line_custom_form" model="ir.ui.view">
        <field name="name">account.move.line.custom.form</field>
        <field name="model">account.move.line</field>
        <field name="mode">primary</field>
        <field eval="1" name="priority"/>
        <field name="inherit_id" ref="account.view_move_line_form"/>
        <field name="arch" type="xml">
            <xpath expr='//sheet/group[1]' position="replace">
                <group>
                    <group>
                        <field name="name" invisible="1"/>
                        <field name="partner_id"
                            domain="['|', ('parent_id', '=', False), ('is_company', '=', True)]"
                            attrs="{'readonly': [('parent_state', '=', 'posted')]}" invisible="1"/>
                        <field name="x_invoicelinetype" required="True" string="内訳区分"/>
                        <field name="x_product_barcode" widget="product_many2one" context="{'show_product_jan': 1}"/>
                        <field name="x_product_name" string="商品名"/>
                        <field name="x_product_name2" string="商品名2"/>
                        <field name="invoice_custom_standardnumber"/>
                        <field name="invoice_custom_FreightCategory" options="{'no_quick_create':True,'no_create_edit':True , 'no_open': True}"/>
                    </group>
                    <group>
                        <field name="product_id" string="Product"  widget="product_many2one"
                               />
                        <field name="price_unit" string="Price" readonly="1"/>
                        <field name="invoice_custom_lineamount"/>
<!--                        <field name="product_uom_id" readonly="1" widget="selection" options="{'no_quick_create':True,'no_create_edit':True , 'no_open': True}" string="UoM"/>-->
<!--                        <field name="line_tax_amount" string="Tax Amount" attrs="{'readonly': [('parent.x_voucher_tax_transfer', '!=', 'custom_tax')]}"/>-->
                        <field name="tax_ids" string="Taxes"
                               widget="many2many_tags" readonly="False"
                               domain="[('type_tax_use', '=?', parent.invoice_filter_type_domain), ('company_id', '=', parent.company_id)]"
                               context="{'append_type_to_tax_name': not parent.invoice_filter_type_domain}"
                               options="{'no_quick_create':True,'no_create_edit':True , 'no_open': True}"/>
                        <field name="invoice_custom_uom_cost_value"/>
                        <field name="invoice_custom_Description"/>
                    </group>
                </group>

            </xpath>
            <xpath expr='//sheet' position="after">
                <footer>
                    <button string="Save" class="btn btn-primary o_form_button_save" special="save"/>
                    <button data-dismiss="modal" string="Close"/>
                </footer>
            </xpath>
            <xpath expr='//sheet/notebook' position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
        </field>
    </record>
<!--  <record id="view_crm_purchased_products_tree" model="ir.ui.view">-->
<!--        <field name="name">crm.purchased_products.tree</field>-->
<!--        <field name="model">crm.purchased_products</field>-->

<!--        <field name="arch" type="xml">-->
<!--            <tree string="Reference Document">-->
<!--                <field name="code"/>-->
<!--                <field name="barcode" required="True" string="UPC/EAN"/>-->
<!--                <field name="name" string="Name"/>-->
<!--                <field name="product_custom_goodsnamef"/>-->
<!--                <field name="description"/>-->
<!--                <field name="categ_id" string="Product Category"/>-->
<!--                <field name="taxes_id" string='Tax Category' widget="many2many_tags"/>-->

<!--                <field name="product_custom_standardnumber" optional="hide"/>-->
<!--                <field name="uom_id" required="False" string="UOM" optional="hide"/>-->
<!--                <field name="type" string="Product Type" required="False" optional="hide"/>-->
<!--                <field name="product_custom_is_stocked" optional="hide"/>-->
<!--                <field name="product_custom_modelnumber" optional="hide"/>-->
<!--                <field name="product_custom_freight_category" optional="hide"/>-->
<!--                <field name="product_custom_comment_help" optional="hide"/>-->
<!--                <field name="product_custom_document_note" optional="hide"/>-->
<!--                <field name="product_custom_is_active" optional="hide"/>-->
<!--                <field name="write_date" optional="hide"/>-->
<!--            </tree>-->
<!--        </field>-->
<!--    </record>-->

  <record id="invoice_template_action" model="ir.actions.act_window">
      <field name="name">Invoices</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">account.move</field>
      <field name="view_mode">tree,form</field>
      <field name="view_id" ref="invoice_custom_tree"/>
      <field name="context">{'form_view_initial_mode': 'edit', 'force_detailed_view': 'true'}</field>
  </record>

    <menuitem action="account.action_move_out_invoice_type" parent="account.menu_finance" sequence="1" id="menu_action_invoice" name="Invoicing"/>


</odoo>
